import{j as r}from"./index-aZqLGs4m.js";import{b as s}from"./vendor-BO-UU5I_.js";import{C as xe,H as be}from"./CompletionModal-CzKoh6CM.js";const we=[["E","C","S","G","I","Y"],["I","N","O","N","R","N"],["A","F","A","D","O","L"],["C","E","R","M","E","I"],["R","U","E","I","V","T"],["Y","E","N","A","O","S"],["N","W","O","D","N","A"],["S","O","L","V","T","O"]],Se=[{word:"CEREMONY",positions:[[3,0],[3,1],[3,2],[4,2],[3,3],[2,4],[1,5],[0,5]],isSpangram:!0,hint:"The main event!"},{word:"REYNOLDA",positions:[[4,0],[5,1],[5,0],[6,0],[7,1],[7,2],[6,3],[5,3]],isSpangram:!1,hint:"The grand barn"},{word:"VOWS",positions:[[7,3],[6,2],[6,1],[7,0]],isSpangram:!1,hint:"Exchanged Promises"},{word:"UNION",positions:[[4,1],[5,2],[4,3],[5,4],[6,4]],isSpangram:!1,hint:"As One"},{word:"RING",positions:[[1,4],[0,4],[1,3],[0,3]],isSpangram:!1,hint:"Symbol of commitment"},{word:"TOAST",positions:[[7,4],[7,5],[6,5],[5,5],[4,5]],isSpangram:!1,hint:"Cheers to the couple!"},{word:"DANCE",positions:[[2,3],[2,2],[1,1],[0,1],[0,0]],isSpangram:!1,hint:"First ___ as husband and wife"},{word:"LOVE",positions:[[4,4],[3,4],[3,5],[2,5]],isSpangram:!1,hint:"The groom lifts to see her face!"},{word:"SOFIA",positions:[[0,2],[1,2],[2,1],[1,0],[2,0]],isSpangram:!1,hint:"It's her special day!"}],ne={grid:we,words:Se},ae=s.memo(({letter:g,row:i,col:c,isSelected:M,isInFound:O,isInSpangram:h,isTapMode:m,onCellClick:j,onCellMouseDown:$,onCellMouseEnter:C,onCellTouchStart:N,setButtonRef:I})=>{const W=()=>j(i,c),E=()=>$(i,c),A=()=>C(i,c),b=w=>N(i,c,w);return r.jsx("button",{ref:w=>I(i,c,w),"data-row":i,"data-col":c,onClick:W,onMouseDown:E,onMouseEnter:A,onTouchStart:b,className:`
        w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16
        flex items-center justify-center
        rounded-full font-bold text-lg sm:text-xl md:text-2xl
        transition-all duration-200
        ${M?"bg-blue-500 text-white scale-95":h?"bg-nyt-yellow text-gray-900":O?"bg-nyt-beige-dark text-white":"bg-nyt-beige-light hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900"}
        cursor-pointer select-none
      `,style:{touchAction:m?"auto":"none"},children:g})});ae.displayName="StrandsCell";const p=ne.grid,x=ne.words,q="wedding-strands-progress";function Ne(){const[g,i]=s.useState([]),[c,M]=s.useState([]),[O,h]=s.useState(""),[m,j]=s.useState(!1),[$,C]=s.useState(!1),[N,I]=s.useState(0),[W,E]=s.useState(!1),[A,b]=s.useState(!1),[w,oe]=s.useState(!1),[S,J]=s.useState(!1),v=s.useRef(null),G=s.useRef(null),X=s.useRef({}),Z=s.useRef(!0),L=s.useRef(null),F=s.useRef({centers:{},rects:{}}),[le,Q]=s.useState(!1);s.useEffect(()=>{localStorage.getItem("wedding-strands-how-to-play")||(Q(!0),localStorage.setItem("wedding-strands-how-to-play","true"))},[]);const T=s.useRef(g),R=s.useRef(A),k=s.useRef(S),z=s.useRef(m),ee=s.useRef(c);s.useEffect(()=>{T.current=g},[g]),s.useEffect(()=>{R.current=A},[A]),s.useEffect(()=>{k.current=S},[S]),s.useEffect(()=>{z.current=m},[m]),s.useEffect(()=>{ee.current=c},[c]);const H=()=>{if(!G.current)return;const e=G.current.getBoundingClientRect(),t={},n={};p.forEach((a,o)=>{a.forEach((d,l)=>{const f=D(o,l),y=X.current[f];if(y){const u=y.getBoundingClientRect();n[f]=u,t[f]={x:u.left-e.left+u.width/2,y:u.top-e.top+u.height/2}}})}),F.current={centers:t,rects:n}};s.useEffect(()=>(H(),window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)),[]),s.useEffect(()=>{const e=localStorage.getItem(q);if(e){const t=JSON.parse(e);M(t.foundWords||[]),I(t.elapsedTime||0),j(t.isComplete||!1),t.foundWords&&t.foundWords.length===x.length&&j(!0)}},[]),s.useEffect(()=>{if(Z.current){Z.current=!1;return}localStorage.setItem(q,JSON.stringify({foundWords:c,elapsedTime:N,isComplete:m}))},[c,N,m]),s.useEffect(()=>{const e=()=>{document.hidden?E(!1):m||E(!0)};return m||E(!0),document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e),v.current&&clearInterval(v.current)}},[m]),s.useEffect(()=>(W&&!m?v.current=setInterval(()=>{I(e=>e+1)},1e3):v.current&&clearInterval(v.current),()=>{v.current&&clearInterval(v.current)}),[W,m]);const te=e=>{const t=Math.floor(e/60),n=e%60;return`${t}:${n.toString().padStart(2,"0")}`},D=(e,t)=>`${e}-${t}`,Y=(e,t)=>{const n=Math.abs(e.row-t.row),a=Math.abs(e.col-t.col);return n<=1&&a<=1&&!(n===0&&a===0)},ie=(e,t)=>e.length!==t.positions.length?!1:e.every((n,a)=>{const[o,d]=t.positions[a];return n.row===o&&n.col===d}),P=s.useCallback(()=>{const e=T.current;if(e.length<3){h("Word too short!"),setTimeout(()=>h(""),2e3),i([]);return}const t=e.map(o=>o.letter).join(""),n=x.find(o=>o.word===t||ie(e,o)),a=ee.current;if(n&&!a.includes(n.word)){const o=[...a,n.word];M(o),h(n.isSpangram?"üéâ Spangram found!":"Great job!"),o.length===x.length&&(j(!0),C(!0)),setTimeout(()=>h(""),2e3)}else a.includes(t)?(h("Already found!"),setTimeout(()=>h(""),2e3)):(h("Not in word list or Invalid word!"),setTimeout(()=>h(""),2e3));i([])},[]),ce=s.useCallback((e,t)=>{if(z.current||!k.current)return;const n=D(e,t),a=T.current;if(a.some(l=>l.key===n)){a.length>0&&a[a.length-1].key===n&&i(l=>l.slice(0,-1));return}if(a.length===0){i([{row:e,col:t,key:n,letter:p[e][t]}]);return}const d=a[a.length-1];Y(d,{row:e,col:t})?i(l=>[...l,{row:e,col:t,key:n,letter:p[e][t]}]):(h("Must select adjacent letters!"),setTimeout(()=>h(""),1500))},[]),de=s.useCallback((e,t)=>{if(z.current||k.current)return;b(!0);const n=D(e,t);i([{row:e,col:t,key:n,letter:p[e][t]}])},[]),ue=s.useCallback((e,t)=>{if(!R.current||z.current||k.current)return;const n=D(e,t),a=T.current;if(!a.some(d=>d.key===n)&&a.length>0){const d=a[a.length-1];Y(d,{row:e,col:t})&&i(l=>[...l,{row:e,col:t,key:n,letter:p[e][t]}])}},[]),B=s.useCallback(()=>{R.current&&T.current.length>=3?P():b(!1)},[P]),me=s.useCallback((e,t,n)=>{if(z.current||k.current)return;L.current=Date.now(),b(!0),H();const a=D(e,t);i([{row:e,col:t,key:a,letter:p[e][t]}])},[]),ge=s.useCallback((e,t,n)=>{n&&(X.current[D(e,t)]=n)},[]),K=s.useCallback(e=>{if(!R.current||z.current||k.current)return;e.preventDefault(),e.stopPropagation();const t=e.touches[0];if(!t)return;const{rects:n}=F.current,a=t.clientX,o=t.clientY;let d=null;for(const l in n){const f=n[l];if(a>=f.left&&a<=f.right&&o>=f.top&&o<=f.bottom){const[y,u]=l.split("-").map(Number);d={row:y,col:u,key:l};break}}if(d){const{row:l,col:f,key:y}=d;i(u=>{if(!u.some(U=>U.key===y)&&u.length>0){const U=u[u.length-1];if(Y(U,{row:l,col:f}))return[...u,{row:l,col:f,key:y,letter:p[l][f]}]}return u})}},[]),_=s.useCallback(e=>{k.current||R.current&&((L.current?Date.now()-L.current:0)>150&&T.current.length>=3&&setTimeout(()=>{P()},50),b(!1),L.current=null)},[]),V=s.useCallback(e=>{R.current&&(b(!1),i([]),L.current=null)},[]);s.useEffect(()=>(document.addEventListener("mouseup",B),document.addEventListener("touchend",_,{passive:!0}),document.addEventListener("touchcancel",V,{passive:!0}),document.addEventListener("touchmove",K,{passive:!1}),()=>{document.removeEventListener("mouseup",B),document.removeEventListener("touchend",_),document.removeEventListener("touchcancel",V),document.removeEventListener("touchmove",K)}),[B,_,V,K]);const fe=()=>{i([])},re=()=>{localStorage.removeItem(q),i([]),M([]),h(""),j(!1),C(!1),I(0),E(!0)},he=()=>{C(!1)},ye=(e,t)=>g.some(n=>n.row===e&&n.col===t),pe=(e,t)=>c.some(n=>{const a=x.find(o=>o.word===n);return a?a.positions.some(([o,d])=>o===e&&d===t):!1}),se=()=>x.filter(e=>!c.includes(e.word));return r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-4 sm:py-8 px-3 sm:px-4",children:[r.jsx(xe,{isOpen:$,icon:"üíç",message:"You found all the words!",primaryButtonText:"New Game",secondaryButtonText:"Show Puzzle",onPrimaryAction:re,onSecondaryAction:he,primaryButtonGradient:"from-yellow-400 to-blue-500",stats:[{label:"Time",value:te(N),gradient:"from-yellow-100 to-blue-100 dark:from-yellow-900/30 dark:to-blue-900/30"}]}),r.jsx(be,{isOpen:le,onClose:()=>Q(!1),children:r.jsxs("ul",{className:"space-y-2",children:[r.jsx("li",{children:"‚Ä¢ Find all the hidden wedding-themed words."}),r.jsx("li",{children:"‚Ä¢ Drag across adjacent letters to form words."}),r.jsx("li",{children:"‚Ä¢ Look for the special spangram that spans across the puzzle (marked with ‚≠ê)"}),r.jsx("li",{children:"‚Ä¢ Try to find all words as quickly as possible!"})]})}),r.jsxs("div",{className:"w-full max-w-[min(96vw,650px)] mx-auto",children:[r.jsxs("header",{className:"text-center mb-6 sm:mb-8",children:[r.jsx("h1",{style:{fontSize:"clamp(2rem, 5vw, 3rem)"},className:"font-bold mb-2 text-gray-900 dark:text-gray-100",children:"Strands"}),r.jsx("p",{style:{fontSize:"clamp(1rem, 2.5vw, 1.25rem)"},className:"text-gray-600 dark:text-gray-300",children:" Wedding Edition"}),r.jsx("p",{style:{fontSize:"clamp(0.55rem, 2vw, 0.75rem)"},className:"text-gray-500 dark:text-gray-400 mt-2",children:"Find the hidden words! ‚Ä¢ Drag to select letters ‚Ä¢ Find the pangram!"})]}),r.jsxs("div",{className:"flex justify-between items-center mb-4 px-2",children:[r.jsx("div",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:te(N)}),r.jsxs("div",{className:"text-base sm:text-lg font-semibold text-gray-700 dark:text-gray-300",children:[c.length," / ",x.length]})]}),!m&&r.jsx("div",{className:"flex justify-center mb-4",children:r.jsxs("div",{className:"bg-white border-2 border-gray-300 rounded-full p-1 inline-flex",children:[r.jsx("button",{onClick:()=>J(!1),className:`px-4 sm:px-6 py-2 rounded-full font-semibold transition-colors ${S?"bg-white text-gray-700 hover:bg-gray-100":"bg-gray-900 text-white"}`,style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)"},children:"Drag Mode"}),r.jsx("button",{onClick:()=>J(!0),className:`px-4 sm:px-6 py-2 rounded-full font-semibold transition-colors ${S?"bg-gray-900 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)"},children:"Tap Mode"})]})}),r.jsx("div",{className:"mb-6 flex justify-center",children:r.jsxs("div",{className:"relative inline-block",ref:G,style:{touchAction:S?"auto":"none"},children:[r.jsx("svg",{className:"absolute inset-0 pointer-events-none",style:{zIndex:1},width:"100%",height:"100%",children:g.length>1&&g.map((e,t)=>{if(t===0)return null;const n=g[t-1],a=F.current.centers[n.key],o=F.current.centers[e.key];return!a||!o?null:r.jsx("line",{x1:a.x,y1:a.y,x2:o.x,y2:o.y,stroke:"#3b82f6",strokeWidth:"4",strokeLinecap:"round"},`path-${t}`)})}),r.jsx("div",{className:"relative",style:{zIndex:2},children:p.map((e,t)=>r.jsx("div",{className:"flex gap-2.5 sm:gap-3 mb-2.5 sm:mb-3",children:e.map((n,a)=>{const o=ye(t,a),d=pe(t,a),l=x.find(y=>y.isSpangram),f=c.includes(l?.word)&&l?.positions.some(([y,u])=>y===t&&u===a);return r.jsx(ae,{letter:n,row:t,col:a,isSelected:o,isInFound:d,isInSpangram:f,isTapMode:S,onCellClick:ce,onCellMouseDown:de,onCellMouseEnter:ue,onCellTouchStart:me,setButtonRef:ge},`${t}-${a}`)})},t))})]})}),g.length>0&&r.jsx("div",{className:"text-center mb-4",children:r.jsx("div",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100",children:g.map(e=>e.letter).join("")})}),O&&r.jsx("div",{className:"text-center mb-4 font-semibold text-base sm:text-lg text-gray-900 dark:text-gray-100",children:O}),!m&&r.jsxs("div",{className:"flex flex-wrap justify-center gap-2 sm:gap-3 mb-6",children:[r.jsx("button",{onClick:fe,className:"px-4 sm:px-6 py-2 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)"},disabled:g.length===0,children:"Clear"}),r.jsx("button",{onClick:P,className:`px-4 sm:px-6 py-2 rounded-full font-semibold transition-colors ${g.length>=3?"bg-gray-900 dark:bg-gray-200 text-white dark:text-gray-900 hover:bg-gray-700 dark:hover:bg-gray-100":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,disabled:g.length<3,style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)"},children:"Submit"}),r.jsxs("button",{onClick:()=>oe(!w),className:"px-4 sm:px-6 py-2 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)"},children:[w?"Hide":"Show"," Hints"]})]}),m&&r.jsxs("div",{className:"flex justify-center gap-3 sm:gap-4",children:[r.jsx("button",{onClick:re,className:"px-5 sm:px-6 py-2.5 bg-gradient-to-r from-yellow-400 to-blue-500 text-white rounded-full font-semibold hover:brightness-110 transition-all transform hover:scale-105 shadow-md",style:{fontSize:"clamp(0.8rem, 2vw, 0.875rem)"},children:"New Game"}),r.jsx("button",{onClick:()=>C(!0),className:"px-5 sm:px-6 py-2.5 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",style:{fontSize:"clamp(0.8rem, 2vw, 0.875rem)"},children:"Show Time"})]}),r.jsxs("div",{className:"mt-8 p-4 sm:p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[r.jsx("h2",{style:{fontSize:"clamp(1.125rem, 2.5vw, 1.25rem)"},className:"font-bold mb-3 text-gray-900 dark:text-gray-100",children:"Found Words"}),r.jsx("div",{className:"space-y-2",children:c.map((e,t)=>{const n=x.find(a=>a.word===e);return r.jsxs("div",{className:`
                    px-3 py-2 rounded-lg font-semibold
                    ${n?.isSpangram?"bg-nyt-yellow text-gray-900":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}
                  `,style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)"},children:[e," ",n?.isSpangram&&"‚≠ê Spangram"]},t)})}),w&&se().length>0&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("h3",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100",style:{fontSize:"clamp(0.875rem, 2vw, 1rem)"},children:"Remaining Word Hints:"}),r.jsx("ul",{className:"space-y-1 text-gray-600 dark:text-gray-300",style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)"},children:se().map((e,t)=>r.jsxs("li",{children:["‚Ä¢ ",e.hint," ",e.isSpangram&&"(Spangram)"]},t))})]})]}),r.jsxs("div",{className:"mt-8 p-4 sm:p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[r.jsx("h2",{style:{fontSize:"clamp(1.125rem, 2.5vw, 1.25rem)"},className:"font-bold mb-3 text-gray-900 dark:text-gray-100",children:"How to Play"}),r.jsxs("ul",{style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)"},className:"space-y-2 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"‚Ä¢ Drag across adjacent letters to form words."}),r.jsx("li",{children:"‚Ä¢ Find all the hidden wedding-themed words."}),r.jsx("li",{children:"‚Ä¢ Look for the special spangram word (marked with ‚≠ê)."}),r.jsx("li",{children:"‚Ä¢ The spangram spans across the puzzle."}),r.jsx("li",{children:"‚Ä¢ Try to find all words as quickly as possible!"})]})]})]})]})}export{Ne as default};
