import{j as e}from"./index-BgpIPabS.js";import{b as s}from"./vendor-BO-UU5I_.js";const ce=[{id:1,title:"DTR - Defined The Relationship",sortDate:"2023-10-16",displayDate:"October 16, 2023",description:"Watching Great British Bake Off and a takeaway curry."},{id:2,title:"First Time Sofia Drove Joel",sortDate:"2025-05-01",displayDate:"May 2025",description:"Sofia played a lot of Rap music."},{id:3,title:"First Time Joel Drove Sofia",sortDate:"2023-12-23",displayDate:"December 23, 2023",description:"He was (more than a little) nervous."},{id:4,title:"First Christmas Together",sortDate:"2023-12-25",displayDate:"December 25, 2023",description:"Family, Friends and Sofia's favourite person... Ananya."},{id:5,title:"First Trip Abroad Together",sortDate:"2024-07-15",displayDate:"July 2024",description:"ðŸ‡«ðŸ‡· + ðŸ‡¨ðŸ‡­."},{id:6,title:"First Pumpkin Patch",sortDate:"2025-10-01",displayDate:"October 2025",description:"We wore the wrong shoes, but Sofia found the perfect pumpkin."},{id:7,title:"Our Engagement",sortDate:"2025-04-05",displayDate:"April 5, 2025",description:"Kind of a big deal!"},{id:8,title:"First visit from our American Friends",sortDate:"2024-01-10",displayDate:"January, 2024",description:"Lost luggage, stuck outside an airport and more tragedy."}],de={events:ce},B="our-timeline-progress";function ge(){const[d,P]=s.useState([]),[o,k]=s.useState(null),[b,I]=s.useState([]),[D,L]=s.useState(0),[S,A]=s.useState(0),[G,g]=s.useState(null),[c,O]=s.useState(!1),[te,C]=s.useState(!1),[E,$]=s.useState(0),[W,v]=s.useState(!1),[i,T]=s.useState(null),[u,h]=s.useState(null),[w,f]=s.useState(!1),[re,J]=s.useState(!1),x=s.useRef(null),H=s.useRef(!0),p=s.useRef(null),j=s.useRef(null);s.useEffect(()=>{const t=localStorage.getItem(B);if(t){const r=JSON.parse(t);P(r.placedCards||[]),k(r.currentCard||null),I(r.remainingCards||[]),L(r.score||0),A(r.totalAttempts||0),$(r.elapsedTime||0),O(r.isComplete||!1),r.isComplete&&C(!1)}else U()},[]);const U=()=>{const r=[...de.events].sort(()=>Math.random()-.5),n=r[0];P([n]);const l=r[1];k(l);const a=r.slice(2);I(a),L(0),A(0),O(!1),C(!1),$(0),v(!0),T(null),h(null)};s.useEffect(()=>{if(H.current){H.current=!1;return}localStorage.setItem(B,JSON.stringify({placedCards:d,currentCard:o,remainingCards:b,score:D,totalAttempts:S,elapsedTime:E,isComplete:c}))},[d,o,b,D,S,E,c]),s.useEffect(()=>{const t=()=>{document.hidden?v(!1):c||v(!0)};return c||v(!0),document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t),x.current&&clearInterval(x.current)}},[c]),s.useEffect(()=>(W&&!c?x.current=setInterval(()=>{$(t=>t+1)},1e3):x.current&&clearInterval(x.current),()=>{x.current&&clearInterval(x.current)}),[W,c]),s.useEffect(()=>{const t=a=>{le(a)},r=a=>{handleTouchMove(a)},n=a=>{handleTouchEnd(a)},l=document.querySelectorAll('[draggable="true"]');return l.forEach(a=>{a.addEventListener("touchstart",t,{passive:!1}),a.addEventListener("touchmove",r,{passive:!1}),a.addEventListener("touchend",n,{passive:!1})}),()=>{l.forEach(a=>{a.removeEventListener("touchstart",t),a.removeEventListener("touchmove",r),a.removeEventListener("touchend",n)})}},[o,u,d,c,i]);const X=t=>{const r=Math.floor(t/60),n=t%60;return`${r}:${n.toString().padStart(2,"0")}`},ne=(t,r)=>{const n=new Date(t.sortDate);for(let l=0;l<r.length;l++){const a=new Date(r[l].sortDate);if(n<a)return l}return r.length},F=t=>{c||i!==null||(t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain","dragging"),f(!0))},q=(t,r)=>{c||i!==null||(t.preventDefault(),t.dataTransfer.dropEffect="move",g(r),h(r))},K=t=>{t.currentTarget.contains(t.relatedTarget)||g(null)},V=(t,r)=>{c||i!==null||(t.preventDefault(),g(null),h(r),f(!1))},Y=()=>{g(null),f(!1)},_=()=>{if(u===null||!o)return;const t=ne(o,d),r=u===t;A(n=>n+1),r?(L(n=>n+1),T("correct")):T("incorrect"),setTimeout(()=>{const n=[...d];n.splice(t,0,o),P(n),b.length>0?(k(b[0]),I(b.slice(1)),T(null),h(null),g(null)):(k(null),O(!0),C(!0),v(!1))},2e3)},se=s.useRef(null),ae=s.useRef(null),m=s.useRef(null),N=s.useRef(!1),M=s.useRef({x:0,y:0}),z=t=>{const r=document.getElementById("placed-cards-container");if(!r)return;const n=Array.from(r.children);let l=!1;for(let a=0;a<n.length;a++){const y=n[a].getBoundingClientRect(),ie=y.top+y.height/2;if(t<ie){g(a),h(a),l=!0;break}}l||(g(n.length),h(n.length))},Q=()=>{if(!N.current||j.current===null)return;const t=j.current,r=window.innerHeight,n=100,l=15;let a=!1;if(t<n){const y=Math.max(.1,(n-t)/n);window.scrollBy(0,-l*y),a=!0}else if(t>r-n){const y=Math.max(.1,(t-(r-n))/n);window.scrollBy(0,l*y),a=!0}a&&z(t),p.current=requestAnimationFrame(Q)},Z=t=>{if(!N.current)return;t.preventDefault();const r=t.touches[0];j.current=r.clientY,m.current&&(m.current.style.left=`${r.clientX-M.current.x}px`,m.current.style.top=`${r.clientY-M.current.y}px`),z(r.clientY)},R=t=>{N.current&&(N.current=!1,f(!1),J(!1),j.current=null,p.current&&(cancelAnimationFrame(p.current),p.current=null),m.current&&(m.current.style.display="none"),window.removeEventListener("touchmove",Z,{passive:!1}),window.removeEventListener("touchend",R),window.removeEventListener("touchcancel",R))},le=t=>{if(c||i!==null)return;const r=t.target.closest('[draggable="true"]');if(!r)return;t.preventDefault();const n=t.touches[0];se.current={x:n.clientX,y:n.clientY},j.current=n.clientY,N.current=!0,f(!0),J(!0),ae.current=r;const l=r.getBoundingClientRect();M.current={x:n.clientX-l.left,y:n.clientY-l.top},m.current&&(m.current.style.display="block",m.current.style.width=`${l.width}px`,m.current.style.left=`${l.left}px`,m.current.style.top=`${l.top}px`),p.current&&cancelAnimationFrame(p.current),Q(),window.addEventListener("touchmove",Z,{passive:!1}),window.addEventListener("touchend",R),window.addEventListener("touchcancel",R),z(n.clientY)},ee=()=>{localStorage.removeItem(B),U()},oe=()=>{C(!1)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-4 sm:py-8 px-3 sm:px-4",children:[te&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-black dark:bg-opacity-70 flex items-center justify-center p-4",style:{zIndex:30},children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-6 sm:p-8 max-w-md w-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸŽ‰"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Congratulations!"}),e.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-2",children:"You completed the timeline!"}),e.jsxs("p",{className:"text-xl font-bold text-timeline-blue mb-2",children:["Score: ",D," out of ",S]}),e.jsxs("p",{className:"text-base text-gray-600 dark:text-gray-400 mb-6",children:["Time: ",X(E)]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:ee,className:"px-6 py-3 bg-gradient-to-r from-yellow-400 to-green-500 text-white rounded-full font-semibold hover:from-yellow-500 hover:to-green-600 transition-colors",children:"New Game"}),e.jsx("button",{onClick:oe,className:"px-6 py-3 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Show Timeline"})]})]})})}),e.jsxs("div",{className:"w-full max-w-[min(96vw,650px)] mx-auto",children:[e.jsxs("header",{className:"text-center mb-6 sm:mb-8",children:[e.jsx("h1",{style:{fontSize:"clamp(2rem, 5vw, 3rem)"},className:"font-bold mb-2 text-gray-900 dark:text-gray-100",children:"Our Timeline"}),e.jsx("p",{style:{fontSize:"clamp(1rem, 2.5vw, 1.25rem)"},className:"text-gray-600 dark:text-gray-300",children:"Place each event in chronological order"}),e.jsxs("div",{className:"mt-4 flex justify-center gap-6",children:[e.jsxs("div",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100",children:["Score: ",D,"/",S]}),e.jsx("div",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100",children:X(E)})]})]}),o&&!c&&e.jsxs("div",{className:`mb-6 ${u!==null?"invisible absolute pointer-events-none opacity-0":""}`,style:u!==null?{height:0,overflow:"hidden",margin:0}:{},children:[e.jsx("h3",{className:"text-center text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Place this event:"}),e.jsxs("div",{draggable:i===null,onDragStart:F,onDragEnd:Y,className:`
                bg-timeline-blue rounded-lg shadow-lg p-4 sm:p-5
                ${i===null?"cursor-move":""}
                ${w?"opacity-50":"opacity-100"}
                transition-all duration-200
                relative
              `,style:{userSelect:"none",WebkitUserSelect:"none"},children:[e.jsx("h3",{className:"font-bold text-lg sm:text-xl text-white mb-2",children:o.title}),e.jsx("p",{className:"text-sm sm:text-base text-gray-100",children:o.description}),i!==null&&e.jsx("div",{className:"absolute top-2 right-2 text-3xl",children:i==="correct"?"âœ“":"âœ—"})]})]}),o&&e.jsx("div",{ref:m,className:"fixed pointer-events-none z-50",style:{display:re?"block":"none"},children:e.jsxs("div",{className:"bg-timeline-blue rounded-lg shadow-2xl p-4 sm:p-5 opacity-90",children:[e.jsx("h3",{className:"font-bold text-lg sm:text-xl text-white mb-2",children:o.title}),e.jsx("p",{className:"text-sm sm:text-base text-gray-100",children:o.description})]})}),u!==null&&i===null&&!c&&e.jsxs("div",{className:"flex justify-center gap-3 mb-4",children:[e.jsx("button",{onClick:()=>{h(null),g(null),f(!1)},className:"px-6 py-3 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:_,className:"px-6 py-3 bg-gray-900 dark:bg-gray-200 text-white dark:text-gray-900 rounded-full font-semibold hover:bg-gray-700 dark:hover:bg-gray-100 transition-colors shadow-lg",children:"Confirm Placement"})]}),e.jsxs("div",{className:"mb-6",id:"placed-cards-container",children:[d.map((t,r)=>e.jsxs("div",{children:[w&&o&&G!==r&&u!==r&&e.jsx("div",{onDragOver:n=>q(n,r),onDragLeave:K,onDrop:n=>V(n,r),className:"h-8 mb-3",style:{opacity:0,pointerEvents:"auto"}}),u===r&&o&&e.jsxs("div",{draggable:i===null,onDragStart:F,onDragEnd:Y,className:`
                    bg-timeline-blue rounded-lg shadow-lg p-4 sm:p-5 mb-3
                    ${i===null?"cursor-move":""}
                    ${w?"opacity-50":"opacity-100"}
                    transition-all duration-200
                    relative
                  `,style:{userSelect:"none",WebkitUserSelect:"none"},children:[e.jsx("h3",{className:"font-bold text-lg sm:text-xl text-white mb-2",children:o.title}),e.jsx("p",{className:"text-sm sm:text-base text-gray-100",children:o.description}),i!==null&&e.jsx("div",{className:"absolute top-2 right-2 text-3xl text-white",children:i==="correct"?"âœ“":"âœ—"})]}),e.jsxs("div",{className:`
                  bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 sm:p-5 mb-3
                  transition-all duration-200
                `,children:[e.jsx("h3",{className:"font-bold text-lg sm:text-xl text-gray-900 dark:text-gray-100 mb-2",children:t.title}),e.jsx("p",{className:"text-sm sm:text-base text-timeline-blue font-semibold mb-2",children:t.displayDate}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-300",children:t.description})]})]},`placed-${t.id}`)),w&&o&&G!==d.length&&u!==d.length&&e.jsx("div",{onDragOver:t=>q(t,d.length),onDragLeave:K,onDrop:t=>V(t,d.length),className:"h-16 mb-3",style:{opacity:0,pointerEvents:"auto"}}),u===d.length&&o&&e.jsxs("div",{draggable:i===null,onDragStart:F,onDragEnd:Y,className:`
                bg-timeline-blue rounded-lg shadow-lg p-4 sm:p-5 mb-3
                ${i===null?"cursor-move":""}
                ${w?"opacity-50":"opacity-100"}
                transition-all duration-200
                relative
              `,style:{userSelect:"none",WebkitUserSelect:"none"},children:[e.jsx("h3",{className:"font-bold text-lg sm:text-xl text-white mb-2",children:o.title}),e.jsx("p",{className:"text-sm sm:text-base text-gray-100",children:o.description}),i!==null&&e.jsx("div",{className:"absolute top-2 right-2 text-3xl text-white",children:i==="correct"?"âœ“":"âœ—"})]})]}),u!==null&&i===null&&!c&&e.jsxs("div",{className:"flex justify-center gap-3 mb-6",children:[e.jsx("button",{onClick:()=>{h(null),g(null),f(!1)},className:"px-6 py-3 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:_,className:"px-6 py-3 bg-gray-900 dark:bg-gray-200 text-white dark:text-gray-900 rounded-full font-semibold hover:bg-gray-700 dark:hover:bg-gray-100 transition-colors shadow-lg",children:"Confirm Placement"})]}),c&&e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("button",{onClick:ee,className:"px-6 py-3 bg-gradient-to-r from-yellow-400 to-green-500 text-white rounded-full font-semibold hover:from-yellow-500 hover:to-green-600 transition-colors",style:{fontSize:"clamp(0.875rem, 2vw, 1rem)"},children:"New Game"})}),e.jsxs("div",{className:"mt-8 sm:mt-12 p-4 sm:p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[e.jsx("h2",{style:{fontSize:"clamp(1.125rem, 2.5vw, 1.25rem)"},className:"font-bold mb-3 text-gray-900 dark:text-gray-100",children:"How to Play"}),e.jsxs("ul",{style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)"},className:"space-y-2 text-gray-700 dark:text-gray-300",children:[e.jsx("li",{children:"â€¢ You'll see one event card at a time to place in the timeline."}),e.jsx("li",{children:"â€¢ Drag the card to where you think it belongs (earlier or later than existing events)."}),e.jsx("li",{children:`â€¢ Click "Confirm Placement" to check if you're right.`}),e.jsx("li",{children:"â€¢ Get 1 point for each correct placement. Your score is out of 7 total cards."}),e.jsx("li",{children:"â€¢ The card will automatically move to the correct position after you confirm."})]})]})]})]})}export{ge as default};
