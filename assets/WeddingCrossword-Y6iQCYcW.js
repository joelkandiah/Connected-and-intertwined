import{j as l,_ as ce}from"./index-oJkx2L23.js";import{b as c}from"./vendor-BO-UU5I_.js";import{C as ie,H as de}from"./CompletionModal-D9ACBJVh.js";const K=c.memo(({cell:d,isSelected:h,isHighlighted:p,isRevealed:j,isIncorrect:n,onClick:w})=>{const a=d.isBlock,g=d.value||"",m=d.number;return l.jsxs("div",{onClick:a?void 0:w,className:`
Â  Â  Â  Â  relative aspect-square flex items-center justify-center
Â  Â  Â  Â  ${a?"bg-gray-900 bg-black cursor-default":h?"border bg-yellow-200 dark:bg-yellow-700 border-yellow-400 dark:border-yellow-500 border-2 cursor-pointer":n?"border bg-red-100 dark:bg-red-900/50 border-red-300 dark:border-red-700 cursor-pointer":p?"border bg-yellow-50 dark:bg-yellow-900/30 border-yellow-300 dark:border-yellow-700 cursor-pointer":"border bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600"}
Â  Â  Â  Â  ${j?"border bg-blue-50 dark:bg-blue-900/30":""}
Â  Â  Â  Â `,role:a?"presentation":"gridcell","aria-label":a?void 0:`Cell ${m||""}`,children:[!a&&m&&l.jsx("span",{className:"absolute top-0.5 left-0.5 pl-0.5 pt-0.5 text-[8px] sm:text-[10px] font-semibold text-gray-700 dark:text-gray-300",children:m}),!a&&j&&l.jsx("div",{className:"absolute top-0 right-0 w-0 h-0 border-t-[12px] border-r-[12px]",style:{borderTop:"12px solid #3b82f6",borderRight:"12px solid #3b82f6",borderLeft:"12px solid transparent",borderBottom:"12px solid transparent"},title:"Revealed cell"}),!a&&l.jsx("span",{className:"text-base sm:text-lg md:text-xl font-bold uppercase text-gray-900 dark:text-gray-100",children:g})]})});K.displayName="Cell";const A=c.memo(({title:d,clues:h,currentClue:p,onClueClick:j})=>l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-lg sm:text-xl font-bold mb-3 uppercase text-gray-900 dark:text-gray-100",children:d}),l.jsx("div",{className:"space-y-2",children:Object.entries(h).map(([n,w])=>{const a=p&&p.number===n&&p.direction===d.toLowerCase();return l.jsxs("div",{onClick:()=>j(n,d.toLowerCase()),onMouseDown:g=>g.preventDefault(),onTouchStart:g=>g.preventDefault(),className:`
                p-2 rounded cursor-pointer transition-colors text-gray-900 dark:text-gray-100
                ${a?"bg-yellow-100 dark:bg-yellow-900/50 border-l-4 border-yellow-500 dark:border-yellow-600 font-semibold":"hover:bg-gray-50 dark:hover:bg-gray-700"}
              `,children:[l.jsxs("span",{className:"font-bold mr-2",children:[n,"."]}),l.jsx("span",{className:"text-sm sm:text-base",children:w.clue})]},n)})})]}));A.displayName="ClueList";const B="wedding-crossword-progress",ue=d=>{try{localStorage.setItem(B,JSON.stringify(d))}catch(h){console.error("Failed to save crossword progress:",h)}},F=()=>{try{const d=localStorage.getItem(B);return d?JSON.parse(d):null}catch(d){return console.error("Failed to load crossword progress:",d),null}},me=()=>{try{localStorage.removeItem(B)}catch(d){console.error("Failed to clear crossword progress:",d)}},pe=ce(()=>import("./wedding-crossword-Du3m7RCO.js"),[]).then(d=>d.default||d),he=()=>{const d=c.use(pe),h=c.useMemo(()=>d.grid,[d]),p=c.useMemo(()=>d.clues,[d]),j=c.useMemo(()=>d.size,[d]),[n,w]=c.useState([]),[a,g]=c.useState(null),[m,b]=c.useState("across"),[G,y]=c.useState(new Set),[$,S]=c.useState(new Set),[v,I]=c.useState(!1),[V,R]=c.useState(!1),[k,L]=c.useState(!1),[N,z]=c.useState(0),[M,E]=c.useState(!1),P=c.useRef(null),C=c.useRef(null),O=c.useRef(0),[q,_]=c.useState(!1);c.useEffect(()=>{localStorage.getItem("wedding-crossword-how-to-play")||(_(!0),localStorage.setItem("wedding-crossword-how-to-play","true"))},[]),c.useEffect(()=>{const e=F(),s=h.map((t,o)=>t.split("").map((i,u)=>({isBlock:i==="#",solution:i==="#"?null:i,value:"",row:o,col:u,number:null}))),r=(t,o)=>{const{row:i,col:u}=t;s[i]&&s[i][u]&&(s[i][u].number=o)};Object.entries(p.across).forEach(([t,o])=>r(o,t)),Object.entries(p.down).forEach(([t,o])=>r(o,t)),e&&e.grid&&e.grid.forEach((t,o)=>{t.forEach((i,u)=>{s[o]&&s[o][u]&&(s[o][u].value=i.value||"")})}),e&&e.revealedCells&&S(new Set(e.revealedCells)),w(s)},[h,p]),c.useEffect(()=>{n.length>0&&ue({grid:n,elapsedTime:N,revealedCells:Array.from($)})},[n,N,$]),c.useEffect(()=>{const e=F();e&&e.elapsedTime&&z(e.elapsedTime)},[]),c.useEffect(()=>{const e=()=>{document.hidden?E(!1):v||E(!0)};return v||E(!0),document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e),C.current&&clearInterval(C.current)}},[v]),c.useEffect(()=>(M&&!v?C.current=setInterval(()=>{z(e=>e+1)},1e3):C.current&&clearInterval(C.current),()=>{C.current&&clearInterval(C.current)}),[M,v]),c.useEffect(()=>{if(n.length===0)return;n.every(s=>s.every(r=>r.isBlock?!0:r.value.toUpperCase()===r.solution))&&!v&&(I(!0),R(!0),E(!1))},[n,v]);const x=c.useCallback(()=>{if(!a)return[];const{row:e,col:s}=a,r=[];if(m==="across"){let t=s;for(;t>0&&n[e]&&n[e][t-1]&&!n[e][t-1].isBlock;)t--;let o=t;for(;n[e]&&n[e][o]&&!n[e][o].isBlock;)r.push({row:e,col:o}),o++}else{let t=e;for(;t>0&&n[t-1]&&n[t-1][s]&&!n[t-1][s].isBlock;)t--;let o=t;for(;n[o]&&n[o][s]&&!n[o][s].isBlock;)r.push({row:o,col:s}),o++}return r},[a,m,n]),J=c.useCallback(()=>{if(!a)return null;const e=x();if(e.length===0)return null;const r=n[e[0].row][e[0].col].number;return r&&p[m][r]?{number:r,direction:m,clue:p[m][r].clue}:null},[a,m,n,x]),X=(e,s)=>{if(!(k||n[e][s].isBlock)&&(a&&a.row===e&&a.col===s?b(t=>t==="across"?"down":"across"):g({row:e,col:s}),P.current)){const t=window.scrollX,o=window.scrollY;P.current.focus({preventScroll:!0}),window.scrollTo(t,o)}},D=c.useCallback(e=>{if(!a||k)return;const{row:s,col:r}=a;if(/^[a-zA-Z]$/.test(e.key)){e.preventDefault(),O.current=Date.now();const t=[...n];t[s][r].value,t[s][r].value=e.key.toUpperCase(),w(t),y(o=>{const i=new Set(o);return i.delete(`${s}-${r}`),i}),S(o=>{const i=new Set(o);return i.delete(`${s}-${r}`),i}),U()}else if(e.key==="Backspace"||e.key==="Delete"){e.preventDefault();const t=[...n];t[s][r].value?(t[s][r].value="",w(t)):ee()}else e.key==="ArrowRight"?(e.preventDefault(),m!=="across"?b("across"):T(0,1)):e.key==="ArrowLeft"?(e.preventDefault(),m!=="across"?b("across"):T(0,-1)):e.key==="ArrowDown"?(e.preventDefault(),m!=="down"?b("down"):T(1,0)):e.key==="ArrowUp"?(e.preventDefault(),m!=="down"?b("down"):T(-1,0)):e.key==="Enter"&&(e.preventDefault(),b(t=>t==="across"?"down":"across"))},[a,n,m]),Q=c.useCallback(e=>{if(!a||k)return;if(Date.now()-O.current<100){e.target.value="";return}const s=e.target.value;if(s&&s.length===1&&/^[a-zA-Z]$/.test(s)){const{row:r,col:t}=a,o=[...n];o[r][t].value=s.toUpperCase(),w(o),y(i=>{const u=new Set(i);return u.delete(`${r}-${t}`),u}),S(i=>{const u=new Set(i);return u.delete(`${r}-${t}`),u}),U()}e.target.value=""},[a,n,k]);c.useEffect(()=>(window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)),[D]);const T=(e,s)=>{if(!a)return;let r=a.row+e,t=a.col+s;for(;r>=0&&r<n.length&&t>=0&&t<n[0].length;){if(!n[r][t].isBlock){g({row:r,col:t});return}r+=e,t+=s}},U=()=>{const e=x();if(e.length===0)return;const s=e.findIndex(r=>r.row===a.row&&r.col===a.col);if(s<e.length-1){const r=e[s+1];g({row:r.row,col:r.col})}},ee=()=>{const e=x();if(e.length===0)return;const s=e.findIndex(r=>r.row===a.row&&r.col===a.col);if(s>0){const r=e[s-1];g({row:r.row,col:r.col})}},te=()=>{const e=x(),s=new Set(G);e.forEach(({row:r,col:t})=>{const o=n[r][t];o.value&&o.value!==o.solution?s.add(`${r}-${t}`):s.delete(`${r}-${t}`)}),y(s)},re=()=>{const e=x(),s=[...n],r=new Set($);e.forEach(({row:t,col:o})=>{s[t][o].value=s[t][o].solution,r.add(`${t}-${o}`)}),w(s),S(r),y(t=>{const o=new Set(t);return e.forEach(({row:i,col:u})=>{o.delete(`${i}-${u}`)}),o})},se=()=>{const e=n.map(r=>r.map(t=>({...t,value:t.isBlock?"":t.solution}))),s=new Set;n.forEach((r,t)=>{r.forEach((o,i)=>{!o.isBlock&&o.value!==o.solution&&s.add(`${t}-${i}`)})}),w(e),S(r=>new Set([...r,...s])),y(new Set)},le=()=>{const e=x(),s=[...n];e.forEach(({row:r,col:t})=>{s[r][t].value=""}),w(s),y(r=>{const t=new Set(r);return e.forEach(({row:o,col:i})=>{t.delete(`${o}-${i}`)}),t})},W=()=>{if(confirm("Are you sure you want to reset the puzzle? All progress will be lost.")){const e=n.map(s=>s.map(r=>({...r,value:""})));w(e),y(new Set),S(new Set),I(!1),R(!1),L(!1),z(0),E(!0),me()}},Z=()=>{W()},oe=()=>{R(!1),L(!0),g(null)},H=c.useCallback((e,s)=>{if(k)return;const r=p[s][e];r&&(g({row:r.row,col:r.col}),b(s))},[k]),f=J(),ne=x();return l.jsx("div",{className:"min-h-screen py-4 sm:py-8 px-3 sm:px-4 bg-gray-50 dark:bg-gray-900",children:l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("header",{className:"text-center mb-6 sm:mb-8",children:[l.jsx("h1",{style:{fontSize:"clamp(2rem, 5vw, 3rem)"},className:"font-bold mb-2 text-gray-900 dark:text-gray-100",children:"The Mini"}),l.jsx("p",{style:{fontSize:"clamp(1rem, 2.5vw, 1.25rem)"},className:"text-gray-600 dark:text-gray-300",children:"Wedding Edition"}),l.jsx("p",{style:{fontSize:"clamp(0.55rem, 2vw, 0.75rem)"},className:"text-gray-500 dark:text-gray-400 mt-2",children:"Piece together all the clues!"}),l.jsxs("div",{className:"mt-3 text-lg font-semibold text-gray-700 dark:text-gray-300",children:["Time: ",Math.floor(N/60),":",(N%60).toString().padStart(2,"0")]})]}),l.jsx(ie,{isOpen:V,icon:"ðŸŽ‰",message:"You completed the puzzle!",primaryButtonText:"New Game",secondaryButtonText:"Show Puzzle",onPrimaryAction:Z,onSecondaryAction:oe,primaryButtonGradient:"from-pink-500 to-purple-500",stats:[{label:"Your Time",value:`${Math.floor(N/60)}:${(N%60).toString().padStart(2,"0")}`,gradient:"from-pink-100 to-purple-100 dark:from-pink-900/30 dark:to-purple-900/30"}]}),l.jsx(de,{isOpen:q,onClose:()=>_(!1),children:l.jsxs("ul",{className:"space-y-2",children:[l.jsx("li",{children:"â€¢ Complete the grid of words as quick as you can."}),l.jsx("li",{children:"â€¢ Select a cell to reveal each clue."}),l.jsx("li",{children:"â€¢ Clicking or Tapping on a cell switches between Across and Down."})]})}),l.jsx("input",{ref:P,type:"text",inputMode:"text",autoComplete:"off",autoCapitalize:"characters",onInput:Q,className:"fixed opacity-0 pointer-events-none",style:{position:"fixed",top:"50%",left:"50%",width:"1px",height:"1px",transform:"translate(-50%, -50%)",zIndex:-1},"aria-hidden":"true"}),f&&l.jsxs("div",{className:"mb-6 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border-2 border-pink-200 dark:border-pink-700",children:[l.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 uppercase tracking-wide mb-1",children:[f.number," ",f.direction]}),l.jsx("div",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-gray-100",children:f.clue})]}),l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsx("div",{className:"w-full flex justify-center",children:l.jsx("div",{className:"grid gap-0 bg-white dark:bg-gray-800 p-2 sm:p-4 rounded-lg shadow-lg",style:{gridTemplateColumns:`repeat(${j}, minmax(0, 1fr))`,width:"clamp(280px, 100%, 500px)",maxWidth:"100vw",aspectRatio:"1/1"},role:"grid","aria-label":"Crossword puzzle grid",children:n.map((e,s)=>l.jsx("div",{role:"row",style:{display:"contents"},children:e.map((r,t)=>{const o=a&&a.row===s&&a.col===t,i=ne.some(Y=>Y.row===s&&Y.col===t)&&!o,u=G.has(`${s}-${t}`),ae=$.has(`${s}-${t}`);return l.jsx(K,{cell:r,isSelected:o,isHighlighted:i,isIncorrect:u,isRevealed:ae,onClick:()=>X(s,t)},`${s}-${t}`)})},`row-${s}`))})}),f&&l.jsxs("div",{className:"sm:hidden mb-6 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border-2 border-pink-200 dark:border-pink-700",children:[l.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 uppercase tracking-wide mb-1",children:[f.number," ",f.direction]}),l.jsx("div",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-gray-100",children:f.clue})]}),k?l.jsxs("div",{className:"flex justify-center gap-6 sm:gap-8",children:[l.jsx("button",{onClick:Z,className:"btn-primary bg-gradient-to-r from-pink-500 to-purple-500 text-sm",children:"New Game"}),l.jsx("button",{onClick:()=>R(!0),className:"btn-secondary text-sm",children:"Show Time"})]}):l.jsxs("div",{className:"flex flex-wrap gap-6 sm:gap-8 justify-center",children:[l.jsx("button",{onClick:te,className:"btn-control text-sm",disabled:!a,children:"Check Word"}),l.jsx("button",{onClick:re,className:"btn-control text-sm",disabled:!a,children:"Reveal Word"}),l.jsx("button",{onClick:le,className:"btn-control text-sm",disabled:!a,children:"Clear Word"}),l.jsx("button",{onClick:se,className:"btn-control text-sm !bg-pink-100 dark:!bg-pink-900/50 !border-pink-300 dark:!border-pink-700 hover:!bg-pink-200 dark:hover:!bg-pink-900/70",children:"Reveal All"}),l.jsx("button",{onClick:W,className:"btn-control text-sm !bg-purple-100 dark:!bg-purple-900/50 !border-purple-300 dark:!border-purple-700 hover:!bg-purple-200 dark:hover:!bg-purple-900/70",children:"Reset Puzzle"})]}),l.jsx("div",{className:"w-full",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-lg max-w-2xl mx-auto",children:[l.jsx(A,{title:"Across",clues:p.across,currentClue:f,onClueClick:H}),l.jsx(A,{title:"Down",clues:p.down,currentClue:f,onClueClick:H})]})})]}),l.jsxs("div",{className:"mt-8 p-4 sm:p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[l.jsx("h2",{className:"text-lg sm:text-xl font-bold mb-3 text-gray-900 dark:text-gray-100",children:"How to Play"}),l.jsxs("ul",{className:"space-y-2 text-sm sm:text-base text-gray-700 dark:text-gray-300",children:[l.jsx("li",{children:"â€¢ Click on a cell to select it, then type to fill in letters."}),l.jsx("li",{children:"â€¢ Click the same cell again or press Enter to toggle between Across and Down."}),l.jsx("li",{children:"â€¢ Use arrow keys to navigate between cells."}),l.jsx("li",{children:"â€¢ Press Backspace to delete the current letter or move to the previous cell."}),l.jsx("li",{children:"â€¢ Click on a clue to jump to that word."}),l.jsx("li",{children:"â€¢ Use Check Word to verify your answer for the current word."}),l.jsx("li",{children:"â€¢ Your progress is automatically saved!"})]})]})]})})};export{he as default};
