import{j as s}from"./index-Ddr0jDS7.js";import{b as r}from"./vendor-BO-UU5I_.js";import{C as we,H as Se}from"./CompletionModal-DvW2SdtI.js";const ke=[["E","C","S","G","I","Y"],["I","N","O","N","R","N"],["A","F","A","D","O","L"],["C","E","R","M","E","I"],["R","U","E","I","V","T"],["Y","E","N","A","O","S"],["N","W","O","D","N","A"],["S","O","L","V","T","O"]],ve=[{word:"CEREMONY",positions:[[3,0],[3,1],[3,2],[4,2],[3,3],[2,4],[1,5],[0,5]],isSpangram:!0,hint:"The main event!"},{word:"REYNOLDA",positions:[[4,0],[5,1],[5,0],[6,0],[7,1],[7,2],[6,3],[5,3]],isSpangram:!1,hint:"The grand barn"},{word:"VOWS",positions:[[7,3],[6,2],[6,1],[7,0]],isSpangram:!1,hint:"Exchanged Promises"},{word:"UNION",positions:[[4,1],[5,2],[4,3],[5,4],[6,4]],isSpangram:!1,hint:"As One"},{word:"RING",positions:[[1,4],[0,4],[1,3],[0,3]],isSpangram:!1,hint:"Symbol of commitment"},{word:"TOAST",positions:[[7,4],[7,5],[6,5],[5,5],[4,5]],isSpangram:!1,hint:"Cheers to the couple!"},{word:"DANCE",positions:[[2,3],[2,2],[1,1],[0,1],[0,0]],isSpangram:!1,hint:"First ___ as husband and wife"},{word:"LOVE",positions:[[4,4],[3,4],[3,5],[2,5]],isSpangram:!1,hint:"The groom lifts to see her face!"},{word:"SOFIA",positions:[[0,2],[1,2],[2,1],[1,0],[2,0]],isSpangram:!1,hint:"It's her special day!"}],oe={grid:ke,words:ve},ae=r.memo(({letter:h,row:d,col:c,isSelected:I,isInFound:F,isInSpangram:f,isTapMode:m,onCellClick:N,onCellMouseDown:_,onCellMouseEnter:E,onCellTouchStart:T,setButtonRef:L})=>{const z=()=>N(d,c),R=()=>_(d,c),O=()=>E(d,c),b=w=>T(d,c,w);return s.jsx("button",{ref:w=>L(d,c,w),"data-row":d,"data-col":c,onClick:z,onMouseDown:R,onMouseEnter:O,onTouchStart:b,className:`
        w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16
        flex items-center justify-center
        rounded-full font-bold text-lg sm:text-xl md:text-2xl
        transition-all duration-200
        ${I?"bg-blue-500 text-white scale-95":f?"bg-nyt-yellow text-gray-900":F?"bg-nyt-beige-dark text-white":"bg-nyt-beige-light hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900"}
        cursor-pointer select-none
      `,style:{touchAction:m?"auto":"none"},children:h})});ae.displayName="StrandsCell";const C=oe.grid,p=oe.words,B="wedding-strands-progress";function Re(){const[h,d]=r.useState([]),[c,I]=r.useState([]),[F,f]=r.useState(""),[m,N]=r.useState(!1),[_,E]=r.useState(!1),[T,L]=r.useState(0),[z,R]=r.useState(!1),[O,b]=r.useState(!1),[w,le]=r.useState(!1),[S,X]=r.useState(!1),k=r.useRef(null),V=r.useRef(null),Z=r.useRef({}),Q=r.useRef(!0),W=r.useRef(null),H=r.useRef({centers:{},rects:{}}),[ie,ee]=r.useState(!1);r.useEffect(()=>{localStorage.getItem("wedding-strands-how-to-play")||(ee(!0),localStorage.setItem("wedding-strands-how-to-play","true"))},[]);const P=r.useRef(h),A=r.useRef(O),v=r.useRef(S),D=r.useRef(m),te=r.useRef(c);r.useEffect(()=>{P.current=h},[h]),r.useEffect(()=>{A.current=O},[O]),r.useEffect(()=>{v.current=S},[S]),r.useEffect(()=>{D.current=m},[m]),r.useEffect(()=>{te.current=c},[c]);const $=()=>{if(!V.current)return;const e=V.current.getBoundingClientRect(),t={},n={};C.forEach((a,o)=>{a.forEach((i,u)=>{const l=M(o,u),g=Z.current[l];if(g){const x=g.getBoundingClientRect();n[l]=x,t[l]={x:x.left-e.left+x.width/2,y:x.top-e.top+x.height/2}}})}),H.current={centers:t,rects:n}};r.useEffect(()=>($(),window.addEventListener("resize",$),()=>window.removeEventListener("resize",$)),[]),r.useEffect(()=>{const e=localStorage.getItem(B);if(e)try{const t=JSON.parse(e);I(t.foundWords||[]),L(t.elapsedTime||0),N(t.isComplete||!1),t.foundWords&&t.foundWords.length===p.length&&N(!0)}catch(t){console.error("Failed to parse save state:",t),localStorage.removeItem(B)}},[]),r.useEffect(()=>{if(Q.current){Q.current=!1;return}localStorage.setItem(B,JSON.stringify({foundWords:c,elapsedTime:T,isComplete:m}))},[c,T,m]),r.useEffect(()=>{const e=()=>{document.hidden?R(!1):m||R(!0)};return m||R(!0),document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e),k.current&&clearInterval(k.current)}},[m]),r.useEffect(()=>(z&&!m?k.current=setInterval(()=>{L(e=>e+1)},1e3):k.current&&clearInterval(k.current),()=>{k.current&&clearInterval(k.current)}),[z,m]);const se=e=>{const t=Math.floor(e/60),n=e%60;return`${t}:${n.toString().padStart(2,"0")}`},M=(e,t)=>`${e}-${t}`,ce=(e,t)=>{const n=Math.abs(e.row-t.row),a=Math.abs(e.col-t.col);return n<=1&&a<=1&&!(n===0&&a===0)},de=(e,t)=>e.length!==t.positions.length?!1:e.every((n,a)=>{const[o,i]=t.positions[a];return n.row===o&&n.col===i}),j=r.useCallback((e,t)=>c.some(n=>{const a=p.find(o=>o.word===n);return a?a.positions.some(([o,i])=>o===e&&i===t):!1}),[c]),y=r.useCallback((e,t,n,a,o)=>{if(j(t,n))return null;if(e.some(l=>l.key===a))return e.length>0&&e[e.length-1].key===a?e.slice(0,-1):e;if(e.length===0)return[{row:t,col:n,key:a,letter:o}];const u=e[e.length-1];return ce(u,{row:t,col:n})?[...e,{row:t,col:n,key:a,letter:o}]:null},[j]),G=r.useCallback(()=>{const e=P.current;if(e.length<3){f("Word too short!"),setTimeout(()=>f(""),2e3),d([]);return}const t=e.map(o=>o.letter).join(""),n=p.find(o=>o.word===t||de(e,o)),a=te.current;if(n&&!a.includes(n.word)){const o=[...a,n.word];I(o),f(n.isSpangram?"üéâ Spangram found!":"Great job!"),o.length===p.length&&(N(!0),E(!0)),setTimeout(()=>f(""),2e3)}else a.includes(t)?(f("Already found!"),setTimeout(()=>f(""),2e3)):(f("Not in word list or Invalid word!"),setTimeout(()=>f(""),2e3));d([])},[]),ue=r.useCallback((e,t)=>{if(D.current||!v.current)return;const n=M(e,t),a=C[e][t];d(o=>{const i=y(o,e,t,n,a);return i||(o.some(l=>l.key===n)||(f("Must select adjacent letters!"),setTimeout(()=>f(""),1500)),o)})},[y]),me=r.useCallback((e,t)=>{if(D.current||v.current||j(e,t))return;b(!0);const n=M(e,t),a=C[e][t];d(o=>o.some(l=>l.key===n)?o:y(o,e,t,n,a)||o)},[j,y]),he=r.useCallback((e,t)=>{if(!A.current||D.current||v.current)return;const n=M(e,t),a=C[e][t];d(o=>o.some(l=>l.key===n)||o.length===0?o:y(o,e,t,n,a)||o)},[y]),K=r.useCallback(()=>{A.current&&(P.current.length>=3&&G(),b(!1))},[G]),fe=r.useCallback((e,t,n)=>{if(D.current||v.current||j(e,t))return;W.current=Date.now(),b(!0),$();const a=M(e,t),o=C[e][t];d(i=>i.some(g=>g.key===a)?i:y(i,e,t,a,o)||i)},[j,y]),ge=r.useCallback((e,t,n)=>{n&&(Z.current[M(e,t)]=n)},[]),U=r.useCallback(e=>{if(!A.current||D.current||v.current)return;e.preventDefault(),e.stopPropagation();const t=e.touches[0];if(!t)return;const{rects:n}=H.current,a=t.clientX,o=t.clientY;let i=null;for(const u in n){const l=n[u];if(a>=l.left&&a<=l.right&&o>=l.top&&o<=l.bottom){const[g,x]=u.split("-").map(Number);i={row:g,col:x,key:u};break}}if(i){const{row:u,col:l,key:g}=i,x=C[u][l];d(Y=>Y.some(be=>be.key===g)?Y:y(Y,u,l,g,x)||Y)}},[y]),q=r.useCallback(e=>{v.current||A.current&&((W.current?Date.now()-W.current:0)>150&&P.current.length>=3&&setTimeout(()=>{G()},50),b(!1),W.current=null)},[]),J=r.useCallback(e=>{A.current&&(b(!1),d([]),W.current=null)},[]);r.useEffect(()=>(document.addEventListener("mouseup",K),document.addEventListener("touchend",q,{passive:!0}),document.addEventListener("touchcancel",J,{passive:!0}),document.addEventListener("touchmove",U,{passive:!1}),()=>{document.removeEventListener("mouseup",K),document.removeEventListener("touchend",q),document.removeEventListener("touchcancel",J),document.removeEventListener("touchmove",U)}),[K,q,J,U]);const xe=()=>{d([])},ne=()=>{localStorage.removeItem(B),d([]),I([]),f(""),N(!1),E(!1),L(0),R(!0)},ye=()=>{E(!1)},pe=(e,t)=>h.some(n=>n.row===e&&n.col===t),re=()=>p.filter(e=>!c.includes(e.word));return s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-4 sm:py-8 px-3 sm:px-4",children:[s.jsx(we,{isOpen:_,icon:"üíç",message:"You found all the words!",primaryButtonText:"New Game",secondaryButtonText:"Show Puzzle",onPrimaryAction:ne,onSecondaryAction:ye,primaryButtonGradient:"from-yellow-400 to-blue-500",stats:[{label:"Time",value:se(T),gradient:"from-yellow-100 to-blue-100 dark:from-yellow-900/30 dark:to-blue-900/30"}]}),s.jsx(Se,{isOpen:ie,onClose:()=>ee(!1),children:s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:"‚Ä¢ Find all the hidden wedding-themed words."}),s.jsx("li",{children:"‚Ä¢ Drag across adjacent letters to form words."}),s.jsx("li",{children:"‚Ä¢ Look for the special spangram that spans across the puzzle (marked with ‚≠ê)"}),s.jsx("li",{children:"‚Ä¢ Try to find all words as quickly as possible!"})]})}),s.jsxs("div",{className:"w-full max-w-[min(96vw,650px)] mx-auto",children:[s.jsxs("header",{className:"text-center mb-6 sm:mb-8",children:[s.jsx("h1",{className:"text-responsive-h1 font-bold mb-2 text-gray-900 dark:text-gray-100",children:"Strands"}),s.jsx("p",{className:"text-responsive-h2 text-gray-600 dark:text-gray-300",children:" Wedding Edition"}),s.jsx("p",{className:"text-responsive-sm text-gray-500 dark:text-gray-400 mt-2",children:"Find the hidden words! ‚Ä¢ Drag to select letters ‚Ä¢ Find the pangram!"})]}),s.jsxs("div",{className:"flex justify-between items-center mb-4 px-2",children:[s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:se(T)}),s.jsxs("div",{className:"text-base sm:text-lg font-semibold text-gray-700 dark:text-gray-300",children:[c.length," / ",p.length]})]}),!m&&s.jsx("div",{className:"flex justify-center mb-4",children:s.jsxs("div",{className:"bg-white border-2 border-gray-300 rounded-full p-1 inline-flex",children:[s.jsx("button",{onClick:()=>X(!1),className:`px-4 sm:px-6 py-2 rounded-full font-semibold transition-colors text-responsive-base ${S?"bg-white text-gray-700 hover:bg-gray-100":"bg-gray-900 text-white"}`,children:"Drag Mode"}),s.jsx("button",{onClick:()=>X(!0),className:`px-4 sm:px-6 py-2 rounded-full font-semibold transition-colors text-responsive-base ${S?"bg-gray-900 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:"Tap Mode"})]})}),s.jsx("div",{className:"mb-6 flex justify-center",children:s.jsxs("div",{className:"relative inline-block",ref:V,style:{touchAction:S?"auto":"none"},children:[s.jsx("svg",{className:"absolute inset-0 pointer-events-none",style:{zIndex:1},width:"100%",height:"100%",children:h.length>1&&h.map((e,t)=>{if(t===0)return null;const n=h[t-1],a=H.current.centers[n.key],o=H.current.centers[e.key];return!a||!o?null:s.jsx("line",{x1:a.x,y1:a.y,x2:o.x,y2:o.y,stroke:"#3b82f6",strokeWidth:"4",strokeLinecap:"round"},`path-${t}`)})}),s.jsx("div",{className:"relative",style:{zIndex:2},children:C.map((e,t)=>s.jsx("div",{className:"flex gap-2.5 sm:gap-3 mb-2.5 sm:mb-3",children:e.map((n,a)=>{const o=pe(t,a),i=j(t,a),u=p.find(g=>g.isSpangram),l=c.includes(u?.word)&&u?.positions.some(([g,x])=>g===t&&x===a);return s.jsx(ae,{letter:n,row:t,col:a,isSelected:o,isInFound:i,isInSpangram:l,isTapMode:S,onCellClick:ue,onCellMouseDown:me,onCellMouseEnter:he,onCellTouchStart:fe,setButtonRef:ge},`${t}-${a}`)})},t))})]})}),h.length>0&&s.jsx("div",{className:"text-center mb-4",children:s.jsx("div",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100",children:h.map(e=>e.letter).join("")})}),F&&s.jsx("div",{className:"text-center mb-4 font-semibold text-base sm:text-lg text-gray-900 dark:text-gray-100",children:F}),!m&&s.jsxs("div",{className:"flex flex-wrap justify-center gap-6 sm:gap-8 mb-6",children:[s.jsx("button",{onClick:xe,className:"btn-control text-responsive-base",disabled:h.length===0,children:"Clear"}),s.jsx("button",{onClick:G,className:`btn-control text-responsive-base ${h.length>=3?"!bg-gray-900 dark:!bg-gray-200 !text-white dark:!text-gray-900 hover:!bg-gray-700 dark:hover:!bg-gray-100":"opacity-50 cursor-not-allowed"}`,disabled:h.length<3,children:"Submit"}),s.jsxs("button",{onClick:()=>le(!w),className:"btn-control text-responsive-base",children:[w?"Hide":"Show"," Hints"]})]}),m&&s.jsxs("div",{className:"flex justify-center gap-6 sm:gap-8",children:[s.jsx("button",{onClick:ne,className:"btn-primary bg-gradient-to-r from-yellow-400 to-blue-500 text-responsive-base",children:"New Game"}),s.jsx("button",{onClick:()=>E(!0),className:"btn-secondary text-responsive-base",children:"Show Time"})]}),s.jsxs("div",{className:"mt-8 p-4 sm:p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[s.jsx("h2",{className:"text-responsive-h2 font-bold mb-3 text-gray-900 dark:text-gray-100",children:"Found Words"}),s.jsx("div",{className:"space-y-2",children:c.map((e,t)=>{const n=p.find(a=>a.word===e);return s.jsxs("div",{className:`
                    px-3 py-2 rounded-lg font-semibold text-responsive-base
                    ${n?.isSpangram?"bg-nyt-yellow text-gray-900":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}
                  `,children:[e," ",n?.isSpangram&&"‚≠ê Spangram"]},t)})}),w&&re().length>0&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100 text-responsive-base",children:"Remaining Word Hints:"}),s.jsx("ul",{className:"space-y-1 text-gray-600 dark:text-gray-300 text-responsive-base",children:re().map((e,t)=>s.jsxs("li",{children:["‚Ä¢ ",e.hint," ",e.isSpangram&&"(Spangram)"]},t))})]})]}),s.jsxs("div",{className:"mt-8 p-4 sm:p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[s.jsx("h2",{className:"text-responsive-h2 font-bold mb-3 text-gray-900 dark:text-gray-100",children:"How to Play"}),s.jsxs("ul",{className:"space-y-2 text-gray-700 dark:text-gray-300 text-responsive-base",children:[s.jsx("li",{children:"‚Ä¢ Drag across adjacent letters to form words."}),s.jsx("li",{children:"‚Ä¢ Find all the hidden wedding-themed words."}),s.jsx("li",{children:"‚Ä¢ Look for the special spangram word (marked with ‚≠ê)."}),s.jsx("li",{children:"‚Ä¢ The spangram spans across the puzzle."}),s.jsx("li",{children:"‚Ä¢ Try to find all words as quickly as possible!"})]})]})]})]})}export{Re as default};
