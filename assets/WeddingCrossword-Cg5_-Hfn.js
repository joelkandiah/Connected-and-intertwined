import{r as i,j as l}from"./index-DnCtQc1n.js";const J=i.memo(({cell:o,isSelected:g,isHighlighted:n,isRevealed:m,isIncorrect:d,onClick:f})=>{const p=o.isBlock,x=o.value||"",h=o.number;return l.jsxs("div",{onClick:p?void 0:f,className:`
Â  Â  Â  Â  relative aspect-square border flex items-center justify-center
Â  Â  Â  Â  ${p?"bg-gray-900 dark:bg-black cursor-default":g?"bg-yellow-200 dark:bg-yellow-700 border-yellow-400 dark:border-yellow-500 border-2 cursor-pointer":d?"bg-red-100 dark:bg-red-900/50 border-red-300 dark:border-red-700 cursor-pointer":n?"bg-yellow-50 dark:bg-yellow-900/30 border-yellow-300 dark:border-yellow-700 cursor-pointer":"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600"}
Â  Â  Â  Â  ${m?"bg-blue-50 dark:bg-blue-900/30":""}
Â  Â  Â  `,role:p?"presentation":"gridcell","aria-label":p?void 0:`Cell ${h||""}`,tabIndex:p?-1:0,children:[!p&&h&&l.jsx("span",{className:"absolute top-0.5 left-0.5 text-[8px] sm:text-[10px] font-semibold text-gray-700 dark:text-gray-300",children:h}),!p&&m&&l.jsx("div",{className:"absolute top-0 left-0 w-0 h-0 border-t-[12px] border-r-[12px]",style:{borderTop:"12px solid #3b82f6",borderLeft:"12px solid #3b82f6",borderRight:"12px solid transparent",borderBottom:"12px solid transparent"},title:"Revealed cell"}),!p&&l.jsx("span",{className:"text-base sm:text-lg md:text-xl font-bold uppercase text-gray-900 dark:text-gray-100",children:x})]})});J.displayName="Cell";const D=i.memo(({title:o,clues:g,currentClue:n,onClueClick:m})=>l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-lg sm:text-xl font-bold mb-3 uppercase text-gray-900 dark:text-gray-100",children:o}),l.jsx("div",{className:"space-y-2",children:Object.entries(g).map(([d,f])=>{const p=n&&n.number===d&&n.direction===o.toLowerCase();return l.jsxs("div",{onClick:()=>m(d,o.toLowerCase()),className:`
                p-2 rounded cursor-pointer transition-colors text-gray-900 dark:text-gray-100
                ${p?"bg-yellow-100 dark:bg-yellow-900/50 border-l-4 border-yellow-500 dark:border-yellow-600 font-semibold":"hover:bg-gray-50 dark:hover:bg-gray-700"}
              `,children:[l.jsxs("span",{className:"font-bold mr-2",children:[d,"."]}),l.jsx("span",{className:"text-sm sm:text-base",children:f.clue})]},d)})})]}));D.displayName="ClueList";const se=5,le=["MRS##","SOFIA","#M#D#","#EROS","JOEL#"],oe={across:{1:{clue:"Title after I do (3)",answer:"MRS",row:0,col:0},4:{clue:"Capital of Bulgaria (5)",answer:"SOFIA",row:1,col:0},6:{clue:"Greek god of love (4)",answer:"EROS",row:3,col:1},8:{clue:"Old Testament Prophet (4)",answer:"JOEL",row:4,col:0}},down:{1:{clue:"Title before I do (2)",answer:"MS",row:0,col:0},2:{clue:"Another star-crossed lover (5)",answer:"ROMEO",row:0,col:1},3:{clue:"Someones initial initials! (2)",answer:"SF",row:0,col:2},5:{clue:"One put on a pedestal. It contains a vow. (4)",answer:"IDOL",row:1,col:3},7:{clue:"RSVP by Email (2)",answer:"RE",row:3,col:2}}},b={size:se,grid:le,clues:oe},A="wedding-crossword-progress",ae=o=>{try{localStorage.setItem(A,JSON.stringify(o))}catch(g){console.error("Failed to save crossword progress:",g)}},U=()=>{try{const o=localStorage.getItem(A);return o?JSON.parse(o):null}catch(o){return console.error("Failed to load crossword progress:",o),null}},ne=()=>{try{localStorage.removeItem(A)}catch(o){console.error("Failed to clear crossword progress:",o)}},ce=()=>{const[o,g]=i.useState([]),[n,m]=i.useState(null),[d,f]=i.useState("across"),[p,x]=i.useState(new Set),[h,C]=i.useState(new Set),[y,I]=i.useState(!1),[Y,R]=i.useState(!1),[k,T]=i.useState(!1),[j,$]=i.useState(0),[B,N]=i.useState(!1),z=i.useRef(null),v=i.useRef(null),G=i.useRef(0);i.useEffect(()=>{const e=U(),s=b.grid.map((r,a)=>r.split("").map((c,u)=>({isBlock:c==="#",solution:c==="#"?null:c,value:"",row:a,col:u,number:null}))),t=(r,a)=>{const{row:c,col:u}=r;s[c]&&s[c][u]&&(s[c][u].number=a)};Object.entries(b.clues.across).forEach(([r,a])=>t(a,r)),Object.entries(b.clues.down).forEach(([r,a])=>t(a,r)),e&&e.grid&&e.grid.forEach((r,a)=>{r.forEach((c,u)=>{s[a]&&s[a][u]&&(s[a][u].value=c.value||"")})}),e&&e.revealedCells&&C(new Set(e.revealedCells)),g(s)},[]),i.useEffect(()=>{o.length>0&&ae({grid:o,elapsedTime:j,revealedCells:Array.from(h)})},[o,j,h]),i.useEffect(()=>{const e=U();e&&e.elapsedTime&&$(e.elapsedTime)},[]),i.useEffect(()=>{const e=()=>{document.hidden?N(!1):y||N(!0)};return y||N(!0),document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e),v.current&&clearInterval(v.current)}},[y]),i.useEffect(()=>(B&&!y?v.current=setInterval(()=>{$(e=>e+1)},1e3):v.current&&clearInterval(v.current),()=>{v.current&&clearInterval(v.current)}),[B,y]),i.useEffect(()=>{if(o.length===0)return;o.every(s=>s.every(t=>t.isBlock?!0:t.value.toUpperCase()===t.solution))&&!y&&(I(!0),R(!0),N(!1))},[o,y]);const w=i.useCallback(()=>{if(!n)return[];const{row:e,col:s}=n,t=[];if(d==="across"){let r=s;for(;r>0&&o[e]&&o[e][r-1]&&!o[e][r-1].isBlock;)r--;let a=r;for(;o[e]&&o[e][a]&&!o[e][a].isBlock;)t.push({row:e,col:a}),a++}else{let r=e;for(;r>0&&o[r-1]&&o[r-1][s]&&!o[r-1][s].isBlock;)r--;let a=r;for(;o[a]&&o[a][s]&&!o[a][s].isBlock;)t.push({row:a,col:s}),a++}return t},[n,d,o]),K=i.useCallback(()=>{if(!n)return null;const e=w();if(e.length===0)return null;const t=o[e[0].row][e[0].col].number;return t&&b.clues[d][t]?{number:t,direction:d,clue:b.clues[d][t].clue}:null},[n,d,o,w]),V=(e,s)=>{k||o[e][s].isBlock||(n&&n.row===e&&n.col===s?f(r=>r==="across"?"down":"across"):m({row:e,col:s}),z.current&&z.current.focus({preventScroll:!1}))},O=i.useCallback(e=>{if(!n||k)return;const{row:s,col:t}=n;if(/^[a-zA-Z]$/.test(e.key)){e.preventDefault(),G.current=Date.now();const r=[...o];r[s][t].value,r[s][t].value=e.key.toUpperCase(),g(r),x(a=>{const c=new Set(a);return c.delete(`${s}-${t}`),c}),C(a=>{const c=new Set(a);return c.delete(`${s}-${t}`),c}),P()}else if(e.key==="Backspace"||e.key==="Delete"){e.preventDefault();const r=[...o];r[s][t].value?(r[s][t].value="",g(r)):Z()}else e.key==="ArrowRight"?(e.preventDefault(),d!=="across"?f("across"):E(0,1)):e.key==="ArrowLeft"?(e.preventDefault(),d!=="across"?f("across"):E(0,-1)):e.key==="ArrowDown"?(e.preventDefault(),d!=="down"?f("down"):E(1,0)):e.key==="ArrowUp"?(e.preventDefault(),d!=="down"?f("down"):E(-1,0)):e.key==="Enter"&&(e.preventDefault(),f(r=>r==="across"?"down":"across"))},[n,o,d]),H=i.useCallback(e=>{if(!n||k)return;if(Date.now()-G.current<100){e.target.value="";return}const s=e.target.value;if(s&&s.length===1&&/^[a-zA-Z]$/.test(s)){const{row:t,col:r}=n,a=[...o];a[t][r].value=s.toUpperCase(),g(a),x(c=>{const u=new Set(c);return u.delete(`${t}-${r}`),u}),C(c=>{const u=new Set(c);return u.delete(`${t}-${r}`),u}),P()}e.target.value=""},[n,o,k]);i.useEffect(()=>(window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)),[O]);const E=(e,s)=>{if(!n)return;let t=n.row+e,r=n.col+s;for(;t>=0&&t<o.length&&r>=0&&r<o[0].length;){if(!o[t][r].isBlock){m({row:t,col:r});return}t+=e,r+=s}},P=()=>{const e=w();if(e.length===0)return;const s=e.findIndex(t=>t.row===n.row&&t.col===n.col);if(s<e.length-1){const t=e[s+1];m({row:t.row,col:t.col})}},Z=()=>{const e=w();if(e.length===0)return;const s=e.findIndex(t=>t.row===n.row&&t.col===n.col);if(s>0){const t=e[s-1];m({row:t.row,col:t.col})}},_=()=>{const e=w(),s=new Set(p);e.forEach(({row:t,col:r})=>{const a=o[t][r];a.value&&a.value!==a.solution?s.add(`${t}-${r}`):s.delete(`${t}-${r}`)}),x(s)},q=()=>{const e=w(),s=[...o],t=new Set(h);e.forEach(({row:r,col:a})=>{s[r][a].value=s[r][a].solution,t.add(`${r}-${a}`)}),g(s),C(t),x(r=>{const a=new Set(r);return e.forEach(({row:c,col:u})=>{a.delete(`${c}-${u}`)}),a})},Q=()=>{const e=o.map(t=>t.map(r=>({...r,value:r.isBlock?"":r.solution}))),s=new Set;o.forEach((t,r)=>{t.forEach((a,c)=>{!a.isBlock&&a.value!==a.solution&&s.add(`${r}-${c}`)})}),g(e),C(t=>new Set([...t,...s])),x(new Set)},X=()=>{const e=w(),s=[...o];e.forEach(({row:t,col:r})=>{s[t][r].value=""}),g(s),x(t=>{const r=new Set(t);return e.forEach(({row:a,col:c})=>{r.delete(`${a}-${c}`)}),r})},L=()=>{if(confirm("Are you sure you want to reset the puzzle? All progress will be lost.")){const e=o.map(s=>s.map(t=>({...t,value:""})));g(e),x(new Set),C(new Set),I(!1),R(!1),T(!1),$(0),N(!0),ne()}},M=()=>{L()},ee=()=>{R(!1),T(!0),m(null)},W=i.useCallback((e,s)=>{if(k)return;const t=b.clues[s][e];t&&(m({row:t.row,col:t.col}),f(s))},[k]),S=K(),re=w();return l.jsx("div",{className:"min-h-screen py-4 sm:py-8 px-3 sm:px-4 bg-gray-50 dark:bg-gray-900",children:l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("header",{className:"text-center mb-6 sm:mb-8",children:[l.jsx("h1",{style:{fontSize:"clamp(2rem, 5vw, 3rem)"},className:"font-bold mb-2 text-gray-900 dark:text-gray-100",children:"The Mini"}),l.jsx("p",{style:{fontSize:"clamp(1rem, 2.5vw, 1.25rem)"},className:"text-gray-600 dark:text-gray-300",children:"Wedding Edition"}),l.jsx("p",{style:{fontSize:"clamp(0.55rem, 2vw, 0.75rem)"},className:"text-gray-500 dark:text-gray-400 mt-2",children:"Piece together all the clues!"}),l.jsxs("div",{className:"mt-3 text-lg font-semibold text-gray-700 dark:text-gray-300",children:["Time: ",Math.floor(j/60),":",(j%60).toString().padStart(2,"0")]})]}),Y&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-black dark:bg-opacity-70 flex items-center justify-center p-4",style:{zIndex:30},children:l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-6 sm:p-8 max-w-md w-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:"ðŸŽ‰"}),l.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Congratulations!"}),l.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-4",children:"You completed the puzzle!"}),l.jsxs("div",{className:"bg-gradient-to-r from-pink-100 to-purple-100 dark:from-pink-900/30 dark:to-purple-900/30 rounded-lg p-4 mb-6",children:[l.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:"Your Time"}),l.jsxs("div",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100",children:[Math.floor(j/60),":",(j%60).toString().padStart(2,"0")]})]}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx("button",{onClick:M,className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-full font-semibold hover:from-pink-600 hover:to-purple-600 transition-colors",children:"New Game"}),l.jsx("button",{onClick:ee,className:"px-6 py-3 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Show Puzzle"})]})]})})}),l.jsx("input",{ref:z,type:"text",inputMode:"text",autoComplete:"off",autoCapitalize:"characters",onInput:H,className:"fixed opacity-0 pointer-events-none",style:{top:0,left:0,width:"1px",height:"1px"},"aria-hidden":"true"}),S&&l.jsxs("div",{className:"mb-6 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border-2 border-pink-200 dark:border-pink-700",children:[l.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 uppercase tracking-wide mb-1",children:[S.number," ",S.direction]}),l.jsx("div",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-gray-100",children:S.clue})]}),l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsx("div",{className:"w-full flex justify-center",children:l.jsx("div",{className:"grid gap-0 bg-white dark:bg-gray-800 p-2 sm:p-4 rounded-lg shadow-lg",style:{gridTemplateColumns:`repeat(${b.size}, minmax(0, 1fr))`,width:"clamp(280px, 100%, 500px)",maxWidth:"100vw",aspectRatio:"1/1"},role:"grid","aria-label":"Crossword puzzle grid",children:o.map((e,s)=>l.jsx("div",{role:"row",style:{display:"contents"},children:e.map((t,r)=>{const a=n&&n.row===s&&n.col===r,c=re.some(F=>F.row===s&&F.col===r)&&!a,u=p.has(`${s}-${r}`),te=h.has(`${s}-${r}`);return l.jsx(J,{cell:t,isSelected:a,isHighlighted:c,isIncorrect:u,isRevealed:te,onClick:()=>V(s,r)},`${s}-${r}`)})},`row-${s}`))})}),k?l.jsx("div",{className:"flex justify-center",children:l.jsx("button",{onClick:M,className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-full font-semibold hover:from-pink-600 hover:to-purple-600 transition-colors",children:"New Game"})}):l.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[l.jsx("button",{onClick:_,className:"px-4 py-2 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-sm",disabled:!n,children:"Check Word"}),l.jsx("button",{onClick:q,className:"px-4 py-2 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-sm",disabled:!n,children:"Reveal Word"}),l.jsx("button",{onClick:X,className:"px-4 py-2 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-sm",disabled:!n,children:"Clear Word"}),l.jsx("button",{onClick:Q,className:"px-4 py-2 bg-pink-100 dark:bg-pink-900/50 border-2 border-pink-300 dark:border-pink-700 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-pink-200 dark:hover:bg-pink-900/70 transition-colors text-sm",children:"Reveal All"}),l.jsx("button",{onClick:L,className:"px-4 py-2 bg-purple-100 dark:bg-purple-900/50 border-2 border-purple-300 dark:border-purple-700 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-purple-200 dark:hover:bg-purple-900/70 transition-colors text-sm",children:"Reset Puzzle"})]}),l.jsx("div",{className:"w-full",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-lg max-w-2xl mx-auto",children:[l.jsx(D,{title:"Across",clues:b.clues.across,currentClue:S,onClueClick:W}),l.jsx(D,{title:"Down",clues:b.clues.down,currentClue:S,onClueClick:W})]})})]}),l.jsxs("div",{className:"mt-8 p-4 sm:p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[l.jsx("h2",{className:"text-lg sm:text-xl font-bold mb-3 text-gray-900 dark:text-gray-100",children:"How to Play"}),l.jsxs("ul",{className:"space-y-2 text-sm sm:text-base text-gray-700 dark:text-gray-300",children:[l.jsx("li",{children:"â€¢ Click on a cell to select it, then type to fill in letters"}),l.jsx("li",{children:"â€¢ Click the same cell again or press Enter to toggle between Across and Down"}),l.jsx("li",{children:"â€¢ Use arrow keys to navigate between cells"}),l.jsx("li",{children:"â€¢ Press Backspace to delete the current letter or move to the previous cell"}),l.jsx("li",{children:"â€¢ Click on a clue to jump to that word"}),l.jsx("li",{children:"â€¢ Use Check Word to verify your answer for the current word"}),l.jsx("li",{children:"â€¢ Your progress is automatically saved!"})]})]})]})})},de=()=>l.jsx(ce,{});export{de as default};
