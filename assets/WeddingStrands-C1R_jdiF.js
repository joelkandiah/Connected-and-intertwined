import{j as r}from"./index-Bea0HpeV.js";import{b as s}from"./vendor-BO-UU5I_.js";import{H as pe}from"./HowToPlayModal-6Lh1_bIP.js";const be=[["E","C","S","G","I","Y"],["I","N","O","N","R","N"],["A","F","A","D","O","L"],["C","E","R","M","E","I"],["R","U","E","I","V","T"],["Y","E","N","A","O","S"],["N","W","O","D","N","A"],["S","O","L","V","T","O"]],we=[{word:"CEREMONY",positions:[[3,0],[3,1],[3,2],[4,2],[3,3],[2,4],[1,5],[0,5]],isSpangram:!0,hint:"The main event!"},{word:"REYNOLDA",positions:[[4,0],[5,1],[5,0],[6,0],[7,1],[7,2],[6,3],[5,3]],isSpangram:!1,hint:"The grand barn"},{word:"VOWS",positions:[[7,3],[6,2],[6,1],[7,0]],isSpangram:!1,hint:"Exchanged Promises"},{word:"UNION",positions:[[4,1],[5,2],[4,3],[5,4],[6,4]],isSpangram:!1,hint:"As One"},{word:"RING",positions:[[1,4],[0,4],[1,3],[0,3]],isSpangram:!1,hint:"Symbol of commitment"},{word:"TOAST",positions:[[7,4],[7,5],[6,5],[5,5],[4,5]],isSpangram:!1,hint:"Cheers to the couple!"},{word:"DANCE",positions:[[2,3],[2,2],[1,1],[0,1],[0,0]],isSpangram:!1,hint:"First ___ as husband and wife"},{word:"LOVE",positions:[[4,4],[3,4],[3,5],[2,5]],isSpangram:!1,hint:"The groom lifts to see her face!"},{word:"SOFIA",positions:[[0,2],[1,2],[2,1],[1,0],[2,0]],isSpangram:!1,hint:"It's her special day!"}],ne={grid:be,words:we},ae=s.memo(({letter:g,row:i,col:c,isSelected:D,isInFound:A,isInSpangram:f,isTapMode:m,onCellClick:j,onCellMouseDown:P,onCellMouseEnter:M,onCellTouchStart:N,setButtonRef:I})=>{const O=()=>j(i,c),C=()=>P(i,c),L=()=>M(i,c),b=w=>N(i,c,w);return r.jsx("button",{ref:w=>I(i,c,w),"data-row":i,"data-col":c,onClick:O,onMouseDown:C,onMouseEnter:L,onTouchStart:b,className:`
        w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16
        flex items-center justify-center
        rounded-full font-bold text-lg sm:text-xl md:text-2xl
        transition-all duration-200
        ${D?"bg-blue-500 text-white scale-95":f?"bg-nyt-yellow text-gray-900":A?"bg-nyt-beige-dark text-white":"bg-nyt-beige-light hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900"}
        cursor-pointer select-none
      `,style:{touchAction:m?"auto":"none"},children:g})});ae.displayName="StrandsCell";const x=ne.grid,p=ne.words,q="wedding-strands-progress";function Ne(){const[g,i]=s.useState([]),[c,D]=s.useState([]),[A,f]=s.useState(""),[m,j]=s.useState(!1),[P,M]=s.useState(!1),[N,I]=s.useState(0),[O,C]=s.useState(!1),[L,b]=s.useState(!1),[w,le]=s.useState(!1),[v,J]=s.useState(!1),S=s.useRef(null),G=s.useRef(null),X=s.useRef({}),Z=s.useRef(!0),W=s.useRef(null),F=s.useRef({centers:{},rects:{}}),[oe,Q]=s.useState(!1);s.useEffect(()=>{localStorage.getItem("wedding-strands-how-to-play")||(Q(!0),localStorage.setItem("wedding-strands-how-to-play","true"))},[]);const E=s.useRef(g),T=s.useRef(L),k=s.useRef(v),R=s.useRef(m),ee=s.useRef(c);s.useEffect(()=>{E.current=g},[g]),s.useEffect(()=>{T.current=L},[L]),s.useEffect(()=>{k.current=v},[v]),s.useEffect(()=>{R.current=m},[m]),s.useEffect(()=>{ee.current=c},[c]);const H=()=>{if(!G.current)return;const e=G.current.getBoundingClientRect(),t={},n={};x.forEach((a,l)=>{a.forEach((d,o)=>{const h=z(l,o),y=X.current[h];if(y){const u=y.getBoundingClientRect();n[h]=u,t[h]={x:u.left-e.left+u.width/2,y:u.top-e.top+u.height/2}}})}),F.current={centers:t,rects:n}};s.useEffect(()=>(H(),window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)),[]),s.useEffect(()=>{const e=localStorage.getItem(q);if(e){const t=JSON.parse(e);D(t.foundWords||[]),I(t.elapsedTime||0),j(t.isComplete||!1),t.foundWords&&t.foundWords.length===p.length&&j(!0)}},[]),s.useEffect(()=>{if(Z.current){Z.current=!1;return}localStorage.setItem(q,JSON.stringify({foundWords:c,elapsedTime:N,isComplete:m}))},[c,N,m]),s.useEffect(()=>{const e=()=>{document.hidden?C(!1):m||C(!0)};return m||C(!0),document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e),S.current&&clearInterval(S.current)}},[m]),s.useEffect(()=>(O&&!m?S.current=setInterval(()=>{I(e=>e+1)},1e3):S.current&&clearInterval(S.current),()=>{S.current&&clearInterval(S.current)}),[O,m]);const te=e=>{const t=Math.floor(e/60),n=e%60;return`${t}:${n.toString().padStart(2,"0")}`},z=(e,t)=>`${e}-${t}`,Y=(e,t)=>{const n=Math.abs(e.row-t.row),a=Math.abs(e.col-t.col);return n<=1&&a<=1&&!(n===0&&a===0)},ie=(e,t)=>e.length!==t.positions.length?!1:e.every((n,a)=>{const[l,d]=t.positions[a];return n.row===l&&n.col===d}),$=s.useCallback(()=>{const e=E.current;if(e.length<3){f("Word too short!"),setTimeout(()=>f(""),2e3),i([]);return}const t=e.map(l=>l.letter).join(""),n=p.find(l=>l.word===t||ie(e,l)),a=ee.current;if(n&&!a.includes(n.word)){const l=[...a,n.word];D(l),f(n.isSpangram?"üéâ Spangram found!":"Great job!"),l.length===p.length&&(j(!0),M(!0)),setTimeout(()=>f(""),2e3)}else a.includes(t)?(f("Already found!"),setTimeout(()=>f(""),2e3)):(f("Not in word list or Invalid word!"),setTimeout(()=>f(""),2e3));i([])},[]),ce=s.useCallback((e,t)=>{if(R.current||!k.current)return;const n=z(e,t),a=E.current;if(a.some(o=>o.key===n)){a.length>0&&a[a.length-1].key===n&&i(o=>o.slice(0,-1));return}if(a.length===0){i([{row:e,col:t,key:n,letter:x[e][t]}]);return}const d=a[a.length-1];Y(d,{row:e,col:t})?i(o=>[...o,{row:e,col:t,key:n,letter:x[e][t]}]):(f("Must select adjacent letters!"),setTimeout(()=>f(""),1500))},[]),de=s.useCallback((e,t)=>{if(R.current||k.current)return;b(!0);const n=z(e,t);i([{row:e,col:t,key:n,letter:x[e][t]}])},[]),ue=s.useCallback((e,t)=>{if(!T.current||R.current||k.current)return;const n=z(e,t),a=E.current;if(!a.some(d=>d.key===n)&&a.length>0){const d=a[a.length-1];Y(d,{row:e,col:t})&&i(o=>[...o,{row:e,col:t,key:n,letter:x[e][t]}])}},[]),K=s.useCallback(()=>{T.current&&E.current.length>=3?$():b(!1)},[$]),me=s.useCallback((e,t,n)=>{if(R.current||k.current)return;W.current=Date.now(),b(!0),H();const a=z(e,t);i([{row:e,col:t,key:a,letter:x[e][t]}])},[]),ge=s.useCallback((e,t,n)=>{n&&(X.current[z(e,t)]=n)},[]),_=s.useCallback(e=>{if(!T.current||R.current||k.current)return;e.preventDefault(),e.stopPropagation();const t=e.touches[0];if(!t)return;const{rects:n}=F.current,a=t.clientX,l=t.clientY;let d=null;for(const o in n){const h=n[o];if(a>=h.left&&a<=h.right&&l>=h.top&&l<=h.bottom){const[y,u]=o.split("-").map(Number);d={row:y,col:u,key:o};break}}if(d){const{row:o,col:h,key:y}=d;i(u=>{if(!u.some(U=>U.key===y)&&u.length>0){const U=u[u.length-1];if(Y(U,{row:o,col:h}))return[...u,{row:o,col:h,key:y,letter:x[o][h]}]}return u})}},[]),V=s.useCallback(e=>{k.current||T.current&&((W.current?Date.now()-W.current:0)>150&&E.current.length>=3&&setTimeout(()=>{$()},50),b(!1),W.current=null)},[]),B=s.useCallback(e=>{T.current&&(b(!1),i([]),W.current=null)},[]);s.useEffect(()=>(document.addEventListener("mouseup",K),document.addEventListener("touchend",V,{passive:!0}),document.addEventListener("touchcancel",B,{passive:!0}),document.addEventListener("touchmove",_,{passive:!1}),()=>{document.removeEventListener("mouseup",K),document.removeEventListener("touchend",V),document.removeEventListener("touchcancel",B),document.removeEventListener("touchmove",_)}),[K,V,B,_]);const he=()=>{i([])},re=()=>{localStorage.removeItem(q),i([]),D([]),f(""),j(!1),M(!1),I(0),C(!0)},fe=()=>{M(!1)},ye=(e,t)=>g.some(n=>n.row===e&&n.col===t),xe=(e,t)=>c.some(n=>{const a=p.find(l=>l.word===n);return a?a.positions.some(([l,d])=>l===e&&d===t):!1}),se=()=>p.filter(e=>!c.includes(e.word));return r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-4 sm:py-8 px-3 sm:px-4",children:[P&&r.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center p-4",style:{zIndex:30},children:r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-6 sm:p-8 max-w-md w-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:"üíç"}),r.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Congratulations!"}),r.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-2",children:"You found all the words!"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:["Time: ",te(N)]}),r.jsxs("div",{className:"flex gap-3 justify-center",children:[r.jsx("button",{onClick:re,className:"px-6 py-3 bg-gradient-to-r from-yellow-400 to-blue-500 text-white rounded-full font-semibold hover:from-yellow-500 hover:to-green-600 transition-colors",children:"New Game"}),r.jsx("button",{onClick:fe,className:"px-6 py-3 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Show Puzzle"})]})]})})}),r.jsx(pe,{isOpen:oe,onClose:()=>Q(!1),children:r.jsxs("ul",{className:"space-y-2",children:[r.jsx("li",{children:"‚Ä¢ Find all the hidden wedding-themed words."}),r.jsx("li",{children:"‚Ä¢ Drag across adjacent letters to form words."}),r.jsx("li",{children:"‚Ä¢ Look for the special spangram that spans across the puzzle (marked with ‚≠ê)"}),r.jsx("li",{children:"‚Ä¢ Try to find all words as quickly as possible!"})]})}),r.jsxs("div",{className:"w-full max-w-[min(96vw,650px)] mx-auto",children:[r.jsxs("header",{className:"text-center mb-6 sm:mb-8",children:[r.jsx("h1",{style:{fontSize:"clamp(2rem, 5vw, 3rem)"},className:"font-bold mb-2 text-gray-900 dark:text-gray-100",children:"Strands"}),r.jsx("p",{style:{fontSize:"clamp(1rem, 2.5vw, 1.25rem)"},className:"text-gray-600 dark:text-gray-300",children:" Wedding Edition"}),r.jsx("p",{style:{fontSize:"clamp(0.55rem, 2vw, 0.75rem)"},className:"text-gray-500 dark:text-gray-400 mt-2",children:"Find the hidden words! ‚Ä¢ Drag to select letters ‚Ä¢ Find the pangram!"})]}),r.jsxs("div",{className:"flex justify-between items-center mb-4 px-2",children:[r.jsx("div",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:te(N)}),r.jsxs("div",{className:"text-base sm:text-lg font-semibold text-gray-700 dark:text-gray-300",children:[c.length," / ",p.length]})]}),!m&&r.jsx("div",{className:"flex justify-center mb-4",children:r.jsxs("div",{className:"bg-white border-2 border-gray-300 rounded-full p-1 inline-flex",children:[r.jsx("button",{onClick:()=>J(!1),className:`px-4 sm:px-6 py-2 rounded-full font-semibold transition-colors ${v?"bg-white text-gray-700 hover:bg-gray-100":"bg-gray-900 text-white"}`,style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)"},children:"Drag Mode"}),r.jsx("button",{onClick:()=>J(!0),className:`px-4 sm:px-6 py-2 rounded-full font-semibold transition-colors ${v?"bg-gray-900 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)"},children:"Tap Mode"})]})}),r.jsx("div",{className:"mb-6 flex justify-center",children:r.jsxs("div",{className:"relative inline-block",ref:G,style:{touchAction:v?"auto":"none"},children:[r.jsx("svg",{className:"absolute inset-0 pointer-events-none",style:{zIndex:1},width:"100%",height:"100%",children:g.length>1&&g.map((e,t)=>{if(t===0)return null;const n=g[t-1],a=F.current.centers[n.key],l=F.current.centers[e.key];return!a||!l?null:r.jsx("line",{x1:a.x,y1:a.y,x2:l.x,y2:l.y,stroke:"#3b82f6",strokeWidth:"4",strokeLinecap:"round"},`path-${t}`)})}),r.jsx("div",{className:"relative",style:{zIndex:2},children:x.map((e,t)=>r.jsx("div",{className:"flex gap-2.5 sm:gap-3 mb-2.5 sm:mb-3",children:e.map((n,a)=>{const l=ye(t,a),d=xe(t,a),o=p.find(y=>y.isSpangram),h=c.includes(o?.word)&&o?.positions.some(([y,u])=>y===t&&u===a);return r.jsx(ae,{letter:n,row:t,col:a,isSelected:l,isInFound:d,isInSpangram:h,isTapMode:v,onCellClick:ce,onCellMouseDown:de,onCellMouseEnter:ue,onCellTouchStart:me,setButtonRef:ge},`${t}-${a}`)})},t))})]})}),g.length>0&&r.jsx("div",{className:"text-center mb-4",children:r.jsx("div",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100",children:g.map(e=>e.letter).join("")})}),A&&r.jsx("div",{className:"text-center mb-4 font-semibold text-base sm:text-lg text-gray-900 dark:text-gray-100",children:A}),!m&&r.jsxs("div",{className:"flex flex-wrap justify-center gap-2 sm:gap-3 mb-6",children:[r.jsx("button",{onClick:he,className:"px-4 sm:px-6 py-2 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)"},disabled:g.length===0,children:"Clear"}),r.jsx("button",{onClick:$,className:`px-4 sm:px-6 py-2 rounded-full font-semibold transition-colors ${g.length>=3?"bg-gray-900 dark:bg-gray-200 text-white dark:text-gray-900 hover:bg-gray-700 dark:hover:bg-gray-100":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,disabled:g.length<3,style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)"},children:"Submit"}),r.jsxs("button",{onClick:()=>le(!w),className:"px-4 sm:px-6 py-2 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)"},children:[w?"Hide":"Show"," Hints"]})]}),m&&r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("button",{onClick:re,className:"px-6 py-3 bg-gradient-to-r from-yellow-400 to-blue-500 text-white rounded-full font-semibold hover:from-yellow-500 hover:to-green-600 transition-colors",style:{fontSize:"clamp(0.875rem, 2vw, 1rem)"},children:"New Game"})}),r.jsxs("div",{className:"mt-8 p-4 sm:p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[r.jsx("h2",{style:{fontSize:"clamp(1.125rem, 2.5vw, 1.25rem)"},className:"font-bold mb-3 text-gray-900 dark:text-gray-100",children:"Found Words"}),r.jsx("div",{className:"space-y-2",children:c.map((e,t)=>{const n=p.find(a=>a.word===e);return r.jsxs("div",{className:`
                    px-3 py-2 rounded-lg font-semibold
                    ${n?.isSpangram?"bg-nyt-yellow text-gray-900":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}
                  `,style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)"},children:[e," ",n?.isSpangram&&"‚≠ê Spangram"]},t)})}),w&&se().length>0&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("h3",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100",style:{fontSize:"clamp(0.875rem, 2vw, 1rem)"},children:"Remaining Word Hints:"}),r.jsx("ul",{className:"space-y-1 text-gray-600 dark:text-gray-300",style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)"},children:se().map((e,t)=>r.jsxs("li",{children:["‚Ä¢ ",e.hint," ",e.isSpangram&&"(Spangram)"]},t))})]})]}),r.jsxs("div",{className:"mt-8 p-4 sm:p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[r.jsx("h2",{style:{fontSize:"clamp(1.125rem, 2.5vw, 1.25rem)"},className:"font-bold mb-3 text-gray-900 dark:text-gray-100",children:"How to Play"}),r.jsxs("ul",{style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)"},className:"space-y-2 text-gray-700 dark:text-gray-300",children:[r.jsx("li",{children:"‚Ä¢ Drag across adjacent letters to form words."}),r.jsx("li",{children:"‚Ä¢ Find all the hidden wedding-themed words."}),r.jsx("li",{children:"‚Ä¢ Look for the special spangram word (marked with ‚≠ê)."}),r.jsx("li",{children:"‚Ä¢ The spangram spans across the puzzle."}),r.jsx("li",{children:"‚Ä¢ Try to find all words as quickly as possible!"})]})]})]})]})}export{Ne as default};
