import{j as o}from"./index-YZf-yqfw.js";import{b as c}from"./vendor-BO-UU5I_.js";import{C as le,H as ae}from"./CompletionModal-Cibq4GJM.js";const Y=c.memo(({cell:l,isSelected:g,isHighlighted:n,isRevealed:w,isIncorrect:d,onClick:f})=>{const m=l.isBlock,p=l.value||"",x=l.number;return o.jsxs("div",{onClick:m?void 0:f,className:`
Â  Â  Â  Â  relative aspect-square flex items-center justify-center
Â  Â  Â  Â  ${m?"bg-gray-900 bg-black cursor-default":g?"border bg-yellow-200 dark:bg-yellow-700 border-yellow-400 dark:border-yellow-500 border-2 cursor-pointer":d?"border bg-red-100 dark:bg-red-900/50 border-red-300 dark:border-red-700 cursor-pointer":n?"border bg-yellow-50 dark:bg-yellow-900/30 border-yellow-300 dark:border-yellow-700 cursor-pointer":"border bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600"}
Â  Â  Â  Â  ${w?"border bg-blue-50 dark:bg-blue-900/30":""}
Â  Â  Â  Â `,role:m?"presentation":"gridcell","aria-label":m?void 0:`Cell ${x||""}`,children:[!m&&x&&o.jsx("span",{className:"absolute top-0.5 left-0.5 pl-0.5 pt-0.5 text-[8px] sm:text-[10px] font-semibold text-gray-700 dark:text-gray-300",children:x}),!m&&w&&o.jsx("div",{className:"absolute top-0 right-0 w-0 h-0 border-t-[12px] border-r-[12px]",style:{borderTop:"12px solid #3b82f6",borderRight:"12px solid #3b82f6",borderLeft:"12px solid transparent",borderBottom:"12px solid transparent"},title:"Revealed cell"}),!m&&o.jsx("span",{className:"text-base sm:text-lg md:text-xl font-bold uppercase text-gray-900 dark:text-gray-100",children:p})]})});Y.displayName="Cell";const O=c.memo(({title:l,clues:g,currentClue:n,onClueClick:w})=>o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-lg sm:text-xl font-bold mb-3 uppercase text-gray-900 dark:text-gray-100",children:l}),o.jsx("div",{className:"space-y-2",children:Object.entries(g).map(([d,f])=>{const m=n&&n.number===d&&n.direction===l.toLowerCase();return o.jsxs("div",{onClick:()=>w(d,l.toLowerCase()),onMouseDown:p=>p.preventDefault(),onTouchStart:p=>p.preventDefault(),className:`
                p-2 rounded cursor-pointer transition-colors text-gray-900 dark:text-gray-100
                ${m?"bg-yellow-100 dark:bg-yellow-900/50 border-l-4 border-yellow-500 dark:border-yellow-600 font-semibold":"hover:bg-gray-50 dark:hover:bg-gray-700"}
              `,children:[o.jsxs("span",{className:"font-bold mr-2",children:[d,"."]}),o.jsx("span",{className:"text-sm sm:text-base",children:f.clue})]},d)})})]}));O.displayName="ClueList";const ne=5,ce=["MRS##","SOFIA","#M#D#","#EROS","JOEL#"],ie={across:{1:{clue:"Title after I do (3)",answer:"MRS",row:0,col:0},4:{clue:"Capital of Bulgaria (5)",answer:"SOFIA",row:1,col:0},6:{clue:"Greek god of love (4)",answer:"EROS",row:3,col:1},8:{clue:"Old Testament Prophet (4)",answer:"JOEL",row:4,col:0}},down:{1:{clue:"Title before I do (2)",answer:"MS",row:0,col:0},2:{clue:"Another star-crossed lover (5)",answer:"ROMEO",row:0,col:1},3:{clue:"Someones initial initials! (2)",answer:"SF",row:0,col:2},5:{clue:"One put on a pedestal. It contains a vow. (4)",answer:"IDOL",row:1,col:3},7:{clue:"RSVP by Email (2)",answer:"RE",row:3,col:2}}},b={size:ne,grid:ce,clues:ie},D="wedding-crossword-progress",de=l=>{try{localStorage.setItem(D,JSON.stringify(l))}catch(g){console.error("Failed to save crossword progress:",g)}},U=()=>{try{const l=localStorage.getItem(D);return l?JSON.parse(l):null}catch(l){return console.error("Failed to load crossword progress:",l),null}},ue=()=>{try{localStorage.removeItem(D)}catch(l){console.error("Failed to clear crossword progress:",l)}},we=()=>{const[l,g]=c.useState([]),[n,w]=c.useState(null),[d,f]=c.useState("across"),[m,p]=c.useState(new Set),[x,S]=c.useState(new Set),[k,A]=c.useState(!1),[J,E]=c.useState(!1),[v,P]=c.useState(!1),[j,R]=c.useState(0),[B,N]=c.useState(!1),T=c.useRef(null),C=c.useRef(null),I=c.useRef(0),[K,M]=c.useState(!1);c.useEffect(()=>{localStorage.getItem("wedding-crossword-how-to-play")||(M(!0),localStorage.setItem("wedding-crossword-how-to-play","true"))},[]),c.useEffect(()=>{const e=U(),s=b.grid.map((r,a)=>r.split("").map((i,u)=>({isBlock:i==="#",solution:i==="#"?null:i,value:"",row:a,col:u,number:null}))),t=(r,a)=>{const{row:i,col:u}=r;s[i]&&s[i][u]&&(s[i][u].number=a)};Object.entries(b.clues.across).forEach(([r,a])=>t(a,r)),Object.entries(b.clues.down).forEach(([r,a])=>t(a,r)),e&&e.grid&&e.grid.forEach((r,a)=>{r.forEach((i,u)=>{s[a]&&s[a][u]&&(s[a][u].value=i.value||"")})}),e&&e.revealedCells&&S(new Set(e.revealedCells)),g(s)},[]),c.useEffect(()=>{l.length>0&&de({grid:l,elapsedTime:j,revealedCells:Array.from(x)})},[l,j,x]),c.useEffect(()=>{const e=U();e&&e.elapsedTime&&R(e.elapsedTime)},[]),c.useEffect(()=>{const e=()=>{document.hidden?N(!1):k||N(!0)};return k||N(!0),document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e),C.current&&clearInterval(C.current)}},[k]),c.useEffect(()=>(B&&!k?C.current=setInterval(()=>{R(e=>e+1)},1e3):C.current&&clearInterval(C.current),()=>{C.current&&clearInterval(C.current)}),[B,k]),c.useEffect(()=>{if(l.length===0)return;l.every(s=>s.every(t=>t.isBlock?!0:t.value.toUpperCase()===t.solution))&&!k&&(A(!0),E(!0),N(!1))},[l,k]);const y=c.useCallback(()=>{if(!n)return[];const{row:e,col:s}=n,t=[];if(d==="across"){let r=s;for(;r>0&&l[e]&&l[e][r-1]&&!l[e][r-1].isBlock;)r--;let a=r;for(;l[e]&&l[e][a]&&!l[e][a].isBlock;)t.push({row:e,col:a}),a++}else{let r=e;for(;r>0&&l[r-1]&&l[r-1][s]&&!l[r-1][s].isBlock;)r--;let a=r;for(;l[a]&&l[a][s]&&!l[a][s].isBlock;)t.push({row:a,col:s}),a++}return t},[n,d,l]),V=c.useCallback(()=>{if(!n)return null;const e=y();if(e.length===0)return null;const t=l[e[0].row][e[0].col].number;return t&&b.clues[d][t]?{number:t,direction:d,clue:b.clues[d][t].clue}:null},[n,d,l,y]),q=(e,s)=>{if(!(v||l[e][s].isBlock)&&(n&&n.row===e&&n.col===s?f(r=>r==="across"?"down":"across"):w({row:e,col:s}),T.current)){const r=window.scrollX,a=window.scrollY;T.current.focus({preventScroll:!0}),window.scrollTo(r,a)}},z=c.useCallback(e=>{if(!n||v)return;const{row:s,col:t}=n;if(/^[a-zA-Z]$/.test(e.key)){e.preventDefault(),I.current=Date.now();const r=[...l];r[s][t].value,r[s][t].value=e.key.toUpperCase(),g(r),p(a=>{const i=new Set(a);return i.delete(`${s}-${t}`),i}),S(a=>{const i=new Set(a);return i.delete(`${s}-${t}`),i}),G()}else if(e.key==="Backspace"||e.key==="Delete"){e.preventDefault();const r=[...l];r[s][t].value?(r[s][t].value="",g(r)):Z()}else e.key==="ArrowRight"?(e.preventDefault(),d!=="across"?f("across"):$(0,1)):e.key==="ArrowLeft"?(e.preventDefault(),d!=="across"?f("across"):$(0,-1)):e.key==="ArrowDown"?(e.preventDefault(),d!=="down"?f("down"):$(1,0)):e.key==="ArrowUp"?(e.preventDefault(),d!=="down"?f("down"):$(-1,0)):e.key==="Enter"&&(e.preventDefault(),f(r=>r==="across"?"down":"across"))},[n,l,d]),X=c.useCallback(e=>{if(!n||v)return;if(Date.now()-I.current<100){e.target.value="";return}const s=e.target.value;if(s&&s.length===1&&/^[a-zA-Z]$/.test(s)){const{row:t,col:r}=n,a=[...l];a[t][r].value=s.toUpperCase(),g(a),p(i=>{const u=new Set(i);return u.delete(`${t}-${r}`),u}),S(i=>{const u=new Set(i);return u.delete(`${t}-${r}`),u}),G()}e.target.value=""},[n,l,v]);c.useEffect(()=>(window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)),[z]);const $=(e,s)=>{if(!n)return;let t=n.row+e,r=n.col+s;for(;t>=0&&t<l.length&&r>=0&&r<l[0].length;){if(!l[t][r].isBlock){w({row:t,col:r});return}t+=e,r+=s}},G=()=>{const e=y();if(e.length===0)return;const s=e.findIndex(t=>t.row===n.row&&t.col===n.col);if(s<e.length-1){const t=e[s+1];w({row:t.row,col:t.col})}},Z=()=>{const e=y();if(e.length===0)return;const s=e.findIndex(t=>t.row===n.row&&t.col===n.col);if(s>0){const t=e[s-1];w({row:t.row,col:t.col})}},_=()=>{const e=y(),s=new Set(m);e.forEach(({row:t,col:r})=>{const a=l[t][r];a.value&&a.value!==a.solution?s.add(`${t}-${r}`):s.delete(`${t}-${r}`)}),p(s)},Q=()=>{const e=y(),s=[...l],t=new Set(x);e.forEach(({row:r,col:a})=>{s[r][a].value=s[r][a].solution,t.add(`${r}-${a}`)}),g(s),S(t),p(r=>{const a=new Set(r);return e.forEach(({row:i,col:u})=>{a.delete(`${i}-${u}`)}),a})},ee=()=>{const e=l.map(t=>t.map(r=>({...r,value:r.isBlock?"":r.solution}))),s=new Set;l.forEach((t,r)=>{t.forEach((a,i)=>{!a.isBlock&&a.value!==a.solution&&s.add(`${r}-${i}`)})}),g(e),S(t=>new Set([...t,...s])),p(new Set)},re=()=>{const e=y(),s=[...l];e.forEach(({row:t,col:r})=>{s[t][r].value=""}),g(s),p(t=>{const r=new Set(t);return e.forEach(({row:a,col:i})=>{r.delete(`${a}-${i}`)}),r})},L=()=>{if(confirm("Are you sure you want to reset the puzzle? All progress will be lost.")){const e=l.map(s=>s.map(t=>({...t,value:""})));g(e),p(new Set),S(new Set),A(!1),E(!1),P(!1),R(0),N(!0),ue()}},W=()=>{L()},te=()=>{E(!1),P(!0),w(null)},H=c.useCallback((e,s)=>{if(v)return;const t=b.clues[s][e];t&&(w({row:t.row,col:t.col}),f(s))},[v]),h=V(),se=y();return o.jsx("div",{className:"min-h-screen py-4 sm:py-8 px-3 sm:px-4 bg-gray-50 dark:bg-gray-900",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("header",{className:"text-center mb-6 sm:mb-8",children:[o.jsx("h1",{style:{fontSize:"clamp(2rem, 5vw, 3rem)"},className:"font-bold mb-2 text-gray-900 dark:text-gray-100",children:"The Mini"}),o.jsx("p",{style:{fontSize:"clamp(1rem, 2.5vw, 1.25rem)"},className:"text-gray-600 dark:text-gray-300",children:"Wedding Edition"}),o.jsx("p",{style:{fontSize:"clamp(0.55rem, 2vw, 0.75rem)"},className:"text-gray-500 dark:text-gray-400 mt-2",children:"Piece together all the clues!"}),o.jsxs("div",{className:"mt-3 text-lg font-semibold text-gray-700 dark:text-gray-300",children:["Time: ",Math.floor(j/60),":",(j%60).toString().padStart(2,"0")]})]}),o.jsx(le,{isOpen:J,icon:"ðŸŽ‰",message:"You completed the puzzle!",primaryButtonText:"New Game",secondaryButtonText:"Show Puzzle",onPrimaryAction:W,onSecondaryAction:te,primaryButtonGradient:"from-pink-500 to-purple-500",stats:[{label:"Your Time",value:`${Math.floor(j/60)}:${(j%60).toString().padStart(2,"0")}`,gradient:"from-pink-100 to-purple-100 dark:from-pink-900/30 dark:to-purple-900/30"}]}),o.jsx(ae,{isOpen:K,onClose:()=>M(!1),children:o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:"â€¢ Complete the grid of words as quick as you can."}),o.jsx("li",{children:"â€¢ Select a cell to reveal each clue."}),o.jsx("li",{children:"â€¢ Clicking or Tapping on a cell switches between Across and Down."})]})}),o.jsx("input",{ref:T,type:"text",inputMode:"text",autoComplete:"off",autoCapitalize:"characters",onInput:X,className:"fixed opacity-0 pointer-events-none",style:{position:"fixed",top:"50%",left:"50%",width:"1px",height:"1px",transform:"translate(-50%, -50%)",zIndex:-1},"aria-hidden":"true"}),h&&o.jsxs("div",{className:"mb-6 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border-2 border-pink-200 dark:border-pink-700",children:[o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 uppercase tracking-wide mb-1",children:[h.number," ",h.direction]}),o.jsx("div",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-gray-100",children:h.clue})]}),o.jsxs("div",{className:"flex flex-col gap-6",children:[o.jsx("div",{className:"w-full flex justify-center",children:o.jsx("div",{className:"grid gap-0 bg-white dark:bg-gray-800 p-2 sm:p-4 rounded-lg shadow-lg",style:{gridTemplateColumns:`repeat(${b.size}, minmax(0, 1fr))`,width:"clamp(280px, 100%, 500px)",maxWidth:"100vw",aspectRatio:"1/1"},role:"grid","aria-label":"Crossword puzzle grid",children:l.map((e,s)=>o.jsx("div",{role:"row",style:{display:"contents"},children:e.map((t,r)=>{const a=n&&n.row===s&&n.col===r,i=se.some(F=>F.row===s&&F.col===r)&&!a,u=m.has(`${s}-${r}`),oe=x.has(`${s}-${r}`);return o.jsx(Y,{cell:t,isSelected:a,isHighlighted:i,isIncorrect:u,isRevealed:oe,onClick:()=>q(s,r)},`${s}-${r}`)})},`row-${s}`))})}),h&&o.jsxs("div",{className:"sm:hidden mb-6 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border-2 border-pink-200 dark:border-pink-700",children:[o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 uppercase tracking-wide mb-1",children:[h.number," ",h.direction]}),o.jsx("div",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-gray-100",children:h.clue})]}),v?o.jsxs("div",{className:"flex justify-center gap-3 sm:gap-4",children:[o.jsx("button",{onClick:W,className:"px-5 py-2.5 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-full font-semibold hover:brightness-110 transition-all transform hover:scale-105 shadow-md text-sm",children:"New Game"}),o.jsx("button",{onClick:()=>E(!0),className:"px-5 py-2.5 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-sm",children:"Show Time"})]}):o.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[o.jsx("button",{onClick:_,className:"px-5 py-2.5 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-sm",disabled:!n,children:"Check Word"}),o.jsx("button",{onClick:Q,className:"px-5 py-2.5 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-sm",disabled:!n,children:"Reveal Word"}),o.jsx("button",{onClick:re,className:"px-5 py-2.5 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-sm",disabled:!n,children:"Clear Word"}),o.jsx("button",{onClick:ee,className:"px-5 py-2.5 bg-pink-100 dark:bg-pink-900/50 border-2 border-pink-300 dark:border-pink-700 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-pink-200 dark:hover:bg-pink-900/70 transition-colors text-sm",children:"Reveal All"}),o.jsx("button",{onClick:L,className:"px-5 py-2.5 bg-purple-100 dark:bg-purple-900/50 border-2 border-purple-300 dark:border-purple-700 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-purple-200 dark:hover:bg-purple-900/70 transition-colors text-sm",children:"Reset Puzzle"})]}),o.jsx("div",{className:"w-full",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-lg max-w-2xl mx-auto",children:[o.jsx(O,{title:"Across",clues:b.clues.across,currentClue:h,onClueClick:H}),o.jsx(O,{title:"Down",clues:b.clues.down,currentClue:h,onClueClick:H})]})})]}),o.jsxs("div",{className:"mt-8 p-4 sm:p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[o.jsx("h2",{className:"text-lg sm:text-xl font-bold mb-3 text-gray-900 dark:text-gray-100",children:"How to Play"}),o.jsxs("ul",{className:"space-y-2 text-sm sm:text-base text-gray-700 dark:text-gray-300",children:[o.jsx("li",{children:"â€¢ Click on a cell to select it, then type to fill in letters."}),o.jsx("li",{children:"â€¢ Click the same cell again or press Enter to toggle between Across and Down."}),o.jsx("li",{children:"â€¢ Use arrow keys to navigate between cells."}),o.jsx("li",{children:"â€¢ Press Backspace to delete the current letter or move to the previous cell."}),o.jsx("li",{children:"â€¢ Click on a clue to jump to that word."}),o.jsx("li",{children:"â€¢ Use Check Word to verify your answer for the current word."}),o.jsx("li",{children:"â€¢ Your progress is automatically saved!"})]})]})]})})};export{we as default};
