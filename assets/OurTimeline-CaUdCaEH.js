import{j as t}from"./index-GIK5xvDm.js";import{b as n}from"./vendor-BO-UU5I_.js";const he=[{id:1,title:"DTR - Defined The Relationship",sortDate:"2023-10-16",displayDate:"October 16, 2023",description:"Watching Great British Bake Off and a takeaway curry."},{id:2,title:"First Time Sofia Drove Joel",sortDate:"2025-05-01",displayDate:"May 2025",description:"Sofia played a lot of Rap music."},{id:3,title:"First Time Joel Drove Sofia",sortDate:"2023-12-23",displayDate:"December 23, 2023",description:"He was (more than a little) nervous."},{id:4,title:"First Christmas Together",sortDate:"2023-12-25",displayDate:"December 25, 2023",description:"Family, Friends and Sofia's favourite person... Ananya."},{id:5,title:"First Trip Abroad Together",sortDate:"2024-07-15",displayDate:"July 2024",description:"ðŸ‡«ðŸ‡· + ðŸ‡¨ðŸ‡­."},{id:6,title:"First Pumpkin Patch",sortDate:"2025-10-01",displayDate:"October 2025",description:"We wore the wrong shoes, but Sofia found the perfect pumpkin."},{id:7,title:"Our Engagement",sortDate:"2025-04-05",displayDate:"April 5, 2025",description:"Kind of a big deal!"},{id:8,title:"First visit from our American Friends",sortDate:"2024-01-10",displayDate:"January 2024",description:"Lost luggage, stuck outside an airport and more tragedy."}],pe={events:he},H="our-timeline-progress";function ve(){const[u,O]=n.useState([]),[a,C]=n.useState(null),[D,$]=n.useState([]),[E,F]=n.useState(0),[R,Y]=n.useState(0),[U,m]=n.useState(null),[c,z]=n.useState(!1),[ie,T]=n.useState(!1),[P,M]=n.useState(0),[q,k]=n.useState(!1),[o,I]=n.useState(null),[g,x]=n.useState(null),[N,y]=n.useState(!1),[ce,K]=n.useState(!1),b=n.useRef(null),V=n.useRef(!0),v=n.useRef(null),S=n.useRef(null),L=n.useRef(null),f=n.useRef(null),B=n.useRef(null),_=n.useRef(0),p=n.useRef(null);n.useEffect(()=>{B.current=ge}),n.useEffect(()=>{const e=localStorage.getItem(H);if(e){const r=JSON.parse(e);O(r.placedCards||[]),C(r.currentCard||null),$(r.remainingCards||[]),F(r.score||0),Y(r.totalAttempts||0),M(r.elapsedTime||0),z(r.isComplete||!1),r.isComplete&&T(!1)}else Q()},[]);const Q=()=>{const r=[...pe.events].sort(()=>Math.random()-.5),l=r[0];O([l]);const s=r[1];C(s);const i=r.slice(2);$(i),F(0),Y(0),z(!1),T(!1),M(0),k(!0),I(null),x(null)};n.useEffect(()=>{if(V.current){V.current=!1;return}localStorage.setItem(H,JSON.stringify({placedCards:u,currentCard:a,remainingCards:D,score:E,totalAttempts:R,elapsedTime:P,isComplete:c}))},[u,a,D,E,R,P,c]),n.useEffect(()=>{const e=()=>{document.hidden?k(!1):c||k(!0)};return c||k(!0),document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e),b.current&&clearInterval(b.current)}},[c]),n.useEffect(()=>(q&&!c?b.current=setInterval(()=>{M(e=>e+1)},1e3):b.current&&clearInterval(b.current),()=>{b.current&&clearInterval(b.current)}),[q,c]),n.useEffect(()=>{const e=l=>{B.current&&B.current(l)},r=f.current;if(r)return r.addEventListener("pointerdown",e),()=>{r.removeEventListener("pointerdown",e)}},[]);const Z=e=>{const r=Math.floor(e/60),l=e%60;return`${r}:${l.toString().padStart(2,"0")}`},de=(e,r)=>{const l=new Date(e.sortDate);for(let s=0;s<r.length;s++){const i=new Date(r[s].sortDate);if(l<i)return s}return r.length},X=e=>{c||o!==null||(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain","dragging"),y(!0))},ee=(e,r)=>{c||o!==null||(e.preventDefault(),e.dataTransfer.dropEffect="move",m(r),x(r))},te=e=>{e.currentTarget.contains(e.relatedTarget)||m(null)},re=(e,r)=>{c||o!==null||(e.preventDefault(),m(null),x(r),y(!1))},G=()=>{m(null),y(!1)},ne=()=>{if(g===null||!a)return;const e=de(a,u),r=g===e;Y(l=>l+1),r?(F(l=>l+1),I("correct")):I("incorrect"),setTimeout(()=>{const l=[...u];l.splice(e,0,a),O(l),D.length>0?(C(D[0]),$(D.slice(1)),I(null),x(null),m(null)):(C(null),z(!0),T(!0),k(!1))},2e3)},ue=n.useRef(null),me=n.useRef(null),d=n.useRef(null),A=n.useRef(!1),J=n.useRef({x:0,y:0}),W=(e,r)=>{const l=document.getElementById("placed-cards-container");if(!l)return;const s=l.getBoundingClientRect();if(r<s.top-20){m(null),x(null);return}const i=Array.from(l.querySelectorAll(".placed-card-wrapper"));let j=!1;for(let h=0;h<i.length;h++){const oe=i[h].getBoundingClientRect(),xe=oe.top+oe.height/2;if(r<xe){m(h),x(h),j=!0;break}}j||(m(i.length),x(i.length))},le=()=>{if(!A.current||S.current===null)return;const e=S.current,r=L.current,l=window.innerHeight,s=100,i=15;let j=!1;if(e<s){const h=Math.max(.1,(s-e)/s);window.scrollBy(0,-i*h),j=!0}else if(e>l-s){const h=Math.max(.1,(e-(l-s))/s);window.scrollBy(0,i*h),j=!0}j&&r!==null&&W(r,e),v.current=requestAnimationFrame(le)},se=e=>{if(!A.current)return;e.preventDefault(),S.current=e.clientY,L.current=e.clientX,d.current&&(d.current.style.left=`${e.clientX-J.current.x}px`,d.current.style.top=`${e.clientY-J.current.y}px`);const r=Date.now();r-_.current>50&&(W(e.clientX,e.clientY),_.current=r)},w=e=>{p.current&&p.current()},ge=e=>{if(c||o!==null)return;p.current&&p.current();const l=(e.target.nodeType===3?e.target.parentNode:e.target).closest('[draggable="true"]');if(!l)return;e.preventDefault(),f.current&&f.current.setPointerCapture(e.pointerId),ue.current={x:e.clientX,y:e.clientY},S.current=e.clientY,L.current=e.clientX,A.current=!0,y(!0),K(!0),me.current=l;const s=l.getBoundingClientRect();J.current={x:e.clientX-s.left,y:e.clientY-s.top},d.current&&(d.current.style.display="block",d.current.style.width=`${s.width}px`,d.current.style.left=`${s.left}px`,d.current.style.top=`${s.top}px`),v.current&&cancelAnimationFrame(v.current),le();const i=f.current;i.addEventListener("pointermove",se),i.addEventListener("pointerup",w),i.addEventListener("pointercancel",w),i.addEventListener("lostpointercapture",w),W(e.clientX,e.clientY),p.current=()=>{A.current=!1,y(!1),K(!1),S.current=null,L.current=null,v.current&&(cancelAnimationFrame(v.current),v.current=null),d.current&&(d.current.style.display="none"),f.current&&(f.current.removeEventListener("pointermove",se),f.current.removeEventListener("pointerup",w),f.current.removeEventListener("pointercancel",w),f.current.removeEventListener("lostpointercapture",w)),p.current=null}};n.useEffect(()=>()=>{p.current&&p.current()},[]);const ae=()=>{localStorage.removeItem(H),Q()},fe=()=>{T(!1)};return t.jsxs("div",{ref:f,className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-4 sm:py-8 px-3 sm:px-4",children:[ie&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-black dark:bg-opacity-70 flex items-center justify-center p-4",style:{zIndex:30},children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-6 sm:p-8 max-w-md w-full",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:"ðŸŽ‰"}),t.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Congratulations!"}),t.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-2",children:"You completed the timeline!"}),t.jsxs("p",{className:"text-xl font-bold text-timeline-blue mb-2",children:["Score: ",E," out of ",R]}),t.jsxs("p",{className:"text-base text-gray-600 dark:text-gray-400 mb-6",children:["Time: ",Z(P)]}),t.jsxs("div",{className:"flex gap-3 justify-center",children:[t.jsx("button",{onClick:ae,className:"px-6 py-3 bg-gradient-to-r from-yellow-400 to-green-500 text-white rounded-full font-semibold hover:from-yellow-500 hover:to-green-600 transition-colors",children:"New Game"}),t.jsx("button",{onClick:fe,className:"px-6 py-3 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Show Timeline"})]})]})})}),t.jsxs("div",{className:"w-full max-w-[min(96vw,650px)] mx-auto",children:[t.jsxs("header",{className:"text-center mb-6 sm:mb-8",children:[t.jsx("h1",{style:{fontSize:"clamp(2rem, 5vw, 3rem)"},className:"font-bold mb-2 text-gray-900 dark:text-gray-100",children:"Our Timeline"}),t.jsx("p",{style:{fontSize:"clamp(1rem, 2.5vw, 1.25rem)"},className:"text-gray-600 dark:text-gray-300",children:"Place each event in chronological order"}),t.jsxs("div",{className:"mt-4 flex justify-center gap-6",children:[t.jsxs("div",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100",children:["Score: ",E,"/",R]}),t.jsx("div",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100",children:Z(P)})]})]}),a&&!c&&t.jsxs("div",{className:`mb-6 ${g!==null?"invisible absolute pointer-events-none opacity-0":""}`,style:g!==null?{height:0,overflow:"hidden",margin:0}:{},children:[t.jsx("h3",{className:"text-center text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Place this event:"}),t.jsxs("div",{draggable:o===null,onDragStart:X,onDragEnd:G,className:`
                bg-timeline-blue rounded-lg shadow-lg p-4 sm:p-5
                ${o===null?"cursor-move":""}
                ${N?"opacity-50":"opacity-100"}
                transition-all duration-200
                relative
                touch-none
              `,style:{userSelect:"none",WebkitUserSelect:"none"},children:[t.jsx("h3",{className:"font-bold text-lg sm:text-xl text-white mb-2",children:a.title}),t.jsx("p",{className:"text-sm sm:text-base text-gray-100",children:a.description}),o!==null&&t.jsx("div",{className:"absolute top-2 right-2 text-3xl",children:o==="correct"?"âœ“":"âœ—"})]})]}),a&&t.jsx("div",{ref:d,className:"fixed pointer-events-none z-50",style:{display:ce?"block":"none"},children:t.jsxs("div",{className:"bg-timeline-blue rounded-lg shadow-2xl p-4 sm:p-5 opacity-90",children:[t.jsx("h3",{className:"font-bold text-lg sm:text-xl text-white mb-2",children:a.title}),t.jsx("p",{className:"text-sm sm:text-base text-gray-100",children:a.description})]})}),g!==null&&o===null&&!c&&t.jsxs("div",{className:"flex justify-center gap-3 mb-4",children:[t.jsx("button",{onClick:()=>{x(null),m(null),y(!1)},className:"px-6 py-3 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),t.jsx("button",{onClick:ne,className:"px-6 py-3 bg-gray-900 dark:bg-gray-200 text-white dark:text-gray-900 rounded-full font-semibold hover:bg-gray-700 dark:hover:bg-gray-100 transition-colors shadow-lg",children:"Confirm Placement"})]}),t.jsxs("div",{className:"mb-6",id:"placed-cards-container",children:[u.map((e,r)=>t.jsxs("div",{className:"placed-card-wrapper",children:[N&&a&&U!==r&&g!==r&&t.jsx("div",{onDragOver:l=>ee(l,r),onDragLeave:te,onDrop:l=>re(l,r),className:"h-8 mb-3",style:{opacity:0,pointerEvents:"auto"}}),g===r&&a&&t.jsxs("div",{draggable:o===null,onDragStart:X,onDragEnd:G,className:`
                    bg-timeline-blue rounded-lg shadow-lg p-4 sm:p-5 mb-3
                    ${o===null?"cursor-move":""}
                    ${N?"opacity-50":"opacity-100"}
                    transition-all duration-200
                    relative
                    touch-none
                  `,style:{userSelect:"none",WebkitUserSelect:"none"},children:[t.jsx("h3",{className:"font-bold text-lg sm:text-xl text-white mb-2",children:a.title}),t.jsx("p",{className:"text-sm sm:text-base text-gray-100",children:a.description}),o!==null&&t.jsx("div",{className:"absolute top-2 right-2 text-3xl text-white",children:o==="correct"?"âœ“":"âœ—"})]}),t.jsxs("div",{className:`
                  bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 sm:p-5 mb-3
                  transition-all duration-200
                `,children:[t.jsx("h3",{className:"font-bold text-lg sm:text-xl text-gray-900 dark:text-gray-100 mb-2",children:e.title}),t.jsx("p",{className:"text-sm sm:text-base text-timeline-blue font-semibold mb-2",children:e.displayDate}),t.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-300",children:e.description})]})]},`placed-${e.id}`)),N&&a&&U!==u.length&&g!==u.length&&t.jsx("div",{onDragOver:e=>ee(e,u.length),onDragLeave:te,onDrop:e=>re(e,u.length),className:"h-16 mb-3",style:{opacity:0,pointerEvents:"auto"}}),g===u.length&&a&&t.jsxs("div",{draggable:o===null,onDragStart:X,onDragEnd:G,className:`
                bg-timeline-blue rounded-lg shadow-lg p-4 sm:p-5 mb-3
                ${o===null?"cursor-move":""}
                ${N?"opacity-50":"opacity-100"}
                transition-all duration-200
                relative
                touch-none
              `,style:{userSelect:"none",WebkitUserSelect:"none"},children:[t.jsx("h3",{className:"font-bold text-lg sm:text-xl text-white mb-2",children:a.title}),t.jsx("p",{className:"text-sm sm:text-base text-gray-100",children:a.description}),o!==null&&t.jsx("div",{className:"absolute top-2 right-2 text-3xl text-white",children:o==="correct"?"âœ“":"âœ—"})]})]}),g!==null&&o===null&&!c&&t.jsxs("div",{className:"flex justify-center gap-3 mb-6",children:[t.jsx("button",{onClick:()=>{x(null),m(null),y(!1)},className:"px-6 py-3 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 rounded-full font-semibold hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),t.jsx("button",{onClick:ne,className:"px-6 py-3 bg-gray-900 dark:bg-gray-200 text-white dark:text-gray-900 rounded-full font-semibold hover:bg-gray-700 dark:hover:bg-gray-100 transition-colors shadow-lg",children:"Confirm Placement"})]}),c&&t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx("button",{onClick:ae,className:"px-6 py-3 bg-gradient-to-r from-yellow-400 to-green-500 text-white rounded-full font-semibold hover:from-yellow-500 hover:to-green-600 transition-colors",style:{fontSize:"clamp(0.875rem, 2vw, 1rem)"},children:"New Game"})}),t.jsxs("div",{className:"mt-8 sm:mt-12 p-4 sm:p-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[t.jsx("h2",{style:{fontSize:"clamp(1.125rem, 2.5vw, 1.25rem)"},className:"font-bold mb-3 text-gray-900 dark:text-gray-100",children:"How to Play"}),t.jsxs("ul",{style:{fontSize:"clamp(0.75rem, 2vw, 0.875rem)"},className:"space-y-2 text-gray-700 dark:text-gray-300",children:[t.jsx("li",{children:"â€¢ You'll see one event card at a time to place in the timeline."}),t.jsx("li",{children:"â€¢ Drag the card to where you think it belongs (earlier or later than existing events)."}),t.jsx("li",{children:`â€¢ Click "Confirm Placement" to check if you're right.`}),t.jsx("li",{children:"â€¢ Get 1 point for each correct placement. Your score is out of 7 total cards."}),t.jsx("li",{children:"â€¢ The card will automatically move to the correct position after you confirm."})]})]})]})]})}export{ve as default};
